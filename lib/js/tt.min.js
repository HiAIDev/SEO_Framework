'use strict';window.tsfTT=function(a){const b=()=>{let k=0,l=!1,m=!1;try{let y=Object.defineProperty({},'passive',{get:()=>{m=!0}});window.addEventListener('tsf-tt-test-passive',y,y).removeEventListener('tsf-tt-test-passive',y,y)}catch(y){}const n=()=>{l=!0,clearTimeout(k),k=setTimeout(()=>{l=!1},250)},o=(y,z)=>{z=z||!1;let A='pointerdown.tsfTT touchstart.tsfTT click.tsfTT',B=a(y);z?(B.off('mousemove mouseleave mouseout tsf-tooltip-update'),a(document.body).off(A)):(B.on({mousemove:s,mouseleave:t,mouseout:t}),a(document.body).off(A).on(A,u)),B.on('tsf-tooltip-update',q)},p=y=>{o(y,!0)},q=y=>{if(y.target.classList.contains('tsf-tooltip-item')){let z=y.target.querySelector('.tsf-tooltip-text');z instanceof Element&&(z.innerHTML=y.target.dataset.desc)}},r=y=>{let z=y.target.dataset.desc||y.target.title||'';z&&0===y.target.getElementsByClassName('tsf-tooltip').length&&(y.target.dataset.desc=z,y.target.title='',c(y,y.target,z))},s=y=>{let z=a(y.target),A=z.find('.tsf-tooltip'),B=A.find('.tsf-tooltip-arrow'),C=y.originalEvent&&y.originalEvent.pageX||y.pageX,D=7,E=16,F=z.closest('.tsf-tooltip-wrap');F.length||(F=$hoverItem.parent());let G=C-F.offset().left-E/2,H=A.find('.tsf-tooltip-text-wrap'),I=H.outerWidth(!0),J=A.data('adjust'),K=I-E-D;if(J=parseInt(J,10),J=isNaN(J)?0:Math.round(J),J&&(G-=J,K+J>F.outerWidth(!0))){let L=H.find('.tsf-tooltip-text'),M=L.outerWidth(!0);K=M-E-D}G<=D?B.css('left',D+'px'):G>=K?B.css('left',K+'px'):B.css('left',G+'px')},t=y=>{l||(f(y.target),p(y.target))},u=y=>{n();let C,A='.tsf-tooltip',B=a(y.target);if(B.hasClass('tsf-tooltip-item')&&(C=B.find(A)),!C){let D=B.children('.tsf-tooltip-item');D.length&&(C=D.find(A))}C&&C.length?a(A).not(C).remove():a(A).remove()},v=y=>{if(!l){let z=!1;switch(y.type){case'mouseenter':break;case'pointerdown':case'touchstart':z=!0;break;default:}z&&u(y),r(y),s(y),o(y.target)}},w=y=>{y.target.classList.contains('tsf-tooltip-item')&&v(y),y.stopPropagation()},x=()=>{let y=document.querySelectorAll('.tsf-tooltip-wrap'),z=!m||{capture:!0,passive:!0};for(let A=0;A<y.length;A++)'mouseenter pointerdown touchstart'.split(' ').forEach(B=>{y[A].removeEventListener(B,w,z),y[A].addEventListener(B,w,z)})};x(),a(window).on('tsf-tooltip-reset',x),d('#wpcontent'),d('#editor')},c=(k,l,m)=>{let n=a(l);if(n.find('.tsf-tooltip').length&&f(l),!!m.length){let o=a('<div class="tsf-tooltip"><span class="tsf-tooltip-text-wrap"><span class="tsf-tooltip-text">'+m+'</span></span><div class="tsf-tooltip-arrow"></div></div>');n.append(o);let p=n.closest('.tsf-tooltip-boundary');p=p.length&&p||a(document.body);let q=n.outerHeight()+8,r=o.offset().top-q,s=p.offset().top-(p.prop('scrolltop')||0);s>r?(o.addClass('tsf-tooltip-down'),o.css('top',q+'px')):o.css('bottom',q+'px');let t=n.closest('.tsf-tooltip-wrap');t.length||(t=n.parent());let u=o.find('.tsf-tooltip-text-wrap'),v=u.find('.tsf-tooltip-text'),w=t.width(),x=u.outerWidth(!0),y=v.outerWidth(!0),z=u.offset().left,B=p.offset().left-(p.prop('scrollLeft')||0),C=B+p.outerWidth(),D='left',E=NaN;if(z<B)E=B-z+12;else if(z+x>C)E=C-z-x-12;else if(42>w)E=2*-w+w/2,-E>x&&(E=-15);else if(k&&1>a(k.target).find(o).length)E=0;else if(k&&w>x){let F=k.originalEvent&&k.originalEvent.pageX||k.pageX,G=t.offset().left,I=F-G-x/2;E=I,0>I?E=0:I+x>w&&(E=w-y)}if(!isNaN(E)){let F=parseInt(u.css('flex-basis'),10);E<-F&&(E=-F),o.css(D,E+'px'),o.data('adjust',E),o.data('adjustDir',D)}}},d=k=>{a(k).addClass('tsf-tooltip-boundary')},f=k=>{g(k).remove()},g=k=>{return a(k).find('.tsf-tooltip').first()};return a.extend({load:function(){a(document.body).on('tsf-onload',b)}},{doTooltip:c,removeTooltip:f,getTooltip:g,addBoundary:d,triggerReset:()=>{a(window).trigger('tsf-tooltip-reset')},triggerUpdate:k=>{a(k||'.tsf-tooltip-item').trigger('tsf-tooltip-update')}})}(jQuery),jQuery(window.tsfTT.load);
