'use strict';window.tsfPT=function(a){var b='undefined'!=typeof tsfPTL10n&&tsfPTL10n;const c=()=>{if(tsf.hasInput&&Object.keys(b.taxonomies).length){let d=b.taxonomies,f=wp.template('tsf-primary-term-selector'),g=wp.template('tsf-primary-term-selector-help'),h=document.createElement('span');h.classList.add('tsf-primary-term-selector'),h.classList.add('tsf-set-primary-term'),(()=>{let L=document.createElement('input');L.setAttribute('type','radio'),h.appendChild(L)})();let i={},j={},k={},l={},m={};const n=L=>{let M=a('#'+L+'div'),N=f({taxonomy:d[L]});M.append(N)},o=L=>{let M=a('#taxonomy-'+L),N=g({taxonomy:d[L]});M.append(N),tsfTT.triggerReset(),p(L)},p=L=>{let M=document.getElementById('taxonomy-'+L),N=M.querySelectorAll('.tabs-panel'),O=a(M).closest('.postbox');if(!(O.length&&O.hasClass('closed'))){let P=Array.prototype.slice.call(N).filter(R=>{return 0<R.offsetWidth||0<R.offsetHeight||0<R.getClientRects().length})[0];if(P){let Q=P.scrollHeight>P.clientHeight?P.offsetWidth-P.clientWidth+25-2:25;tsf.states.isRTL?M.querySelector('.tsf-primary-term-selector-help-wrap').style.left=Q+'px':M.querySelector('.tsf-primary-term-selector-help-wrap').style.right=Q+'px'}}},q=L=>{p(L.data.taxonomy)},r=L=>{let M=h.cloneNode(!0);return M.setAttribute('title',d[L].i18n.makePrimary),M.setAttribute('aria-label',d[L].i18n.makePrimary),M},s=(L,M)=>{let N=document.getElementById('autodescription[_primary_term_'+L+']');N&&N instanceof Element&&(N.value=M||0)},t=(L,M)=>{return!M&&l[L]?l[L]:(l[L]=a('#'+L+'checklist, #'+L+'checklist-pop'),l[L])},u=(L,M)=>i[L].filter('[value="'+M+'"]'),v=(L,M)=>{let N=u(L,M).closest('label');N.length?(N.addClass('tsf-is-primary-term'),N.find('.tsf-set-primary-term').each(function(O,P){P.setAttribute('title',d[L].i18n.primary),P.setAttribute('aria-label',d[L].i18n.primary),P.querySelector('input').checked=!0}),s(L,M),m[L]=M):x(L)},w=L=>{let M=t(L).find('label');M.removeClass('tsf-is-primary-term'),M.find('.tsf-set-primary-term').each(function(N,O){O.setAttribute('title',d[L].i18n.makePrimary),O.setAttribute('aria-label',d[L].i18n.makePrimary),O.querySelector('input').checked=!1}),s(L,0),m[L]=0},x=L=>{let N,M=k[L].first();M.length?(N=M.val()||'',v(L,N),m[L]=N):m[L]=0},y=L=>{let M=L.data.taxonomy,N=a(L.target).closest('label').find('input[type=checkbox]').val();return w(M),v(M,N),!1},z=L=>{let M=L.data.taxonomy;switch(L.target.checked?(C(M,L.target),A(M,L.target)):(D(M,L.target),B(M,L.target)),k[M].length){case 0:w(M);break;case 1:x(M);}},A=(L,M)=>{let N;u(L,M.value).each((O,P)=>{N=a(P).closest('label'),N.find('.tsf-primary-term-selector').length||N.append(r(L))})},B=(L,M)=>{let N,O;u(L,M.value).each((P,Q)=>{N=a(Q).closest('label'),O=N.hasClass('tsf-is-primary-term'),N.removeClass('tsf-is-primary-term'),N.find('.tsf-primary-term-selector').remove(),O&&x(L)})},C=(L,M)=>{j[L]=j[L].add('[value="'+M.value+'"]'),k[L]=k[L].add(M)},D=(L,M)=>{j[L]=j[L].not('[value="'+M.value+'"]'),k[L]=k[L].not('[value="'+M.value+'"]')},E=L=>{p(L.data.taxonomy)},F=function(L){let M=t(L,1);i[L]=M.find('input[type=checkbox]'),j[L]=M.find('input[type=checkbox]:checked');let O,N={};k[L]=j[L],k[L].each(function(P,Q){O=a(Q).val(),N[O]?k[L].splice(P,1):N[O]=!0})},G=(L,M,N)=>{N.hasOwnProperty('settings')&&N.settings.hasOwnProperty('what')&&(F(N.settings.what),H(N.settings.what),I(N.settings.what),p(N.settings.what))},H=L=>{let M='tsfShowPrimary'+L,N={taxonomy:L},O=t(L),P=a('#'+L+'div'),Q=a('#'+L+'-tabs'),R=O.closest('.postbox');O.off('click.'+M),O.on('click.'+M,'input[type="checkbox"]',N,z),O.on('click.'+M,'.tsf-primary-term-selector',N,y),P.off('wpListAddEnd.'+M),P.on('wpListAddEnd.'+M,'#'+L+'checklist',G),Q.off('click.'+M),Q.on('click.'+M,'a',N,q),R.off('click.postboxes.'+M),R.on('click.postboxes.'+M,N,E)},I=L=>{t(L).find('input[type="checkbox"]:checked').each((M,N)=>{A(L,N)}),m[L]?v(L,m[L]):x(L)},J=L=>{t(L).find('input[type="checkbox"]:checked').each((M,N)=>{A(L,N)}),d[L].primary?v(L,d[L].primary):x(L)};(()=>{for(let L in d)t(L).length&&(n(L),o(L),F(L),H(L),J(L))})()}};return a.extend({load:function(){a(document.body).on('tsf-onload',c)}},{})}(jQuery),jQuery(window.tsfPT.load);
