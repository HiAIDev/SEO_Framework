'use strict';window.tsfPT=function(a){var b='undefined'!=typeof tsfPTL10n&&tsfPTL10n;const c=()=>{if(tsf.hasInput&&Object.keys(b.taxonomies).length){let d=b.taxonomies,f=wp.template('tsf-primary-term-selector'),g=wp.template('tsf-primary-term-selector-help'),h=document.createElement('span');h.classList.add('tsf-primary-term-selector'),h.classList.add('tsf-set-primary-term'),(()=>{let K=document.createElement('input');K.setAttribute('type','radio'),h.appendChild(K)})();let i={},j={},k={},l={},m={};const n=K=>{let L=a('#'+K+'div'),M=f({taxonomy:d[K]});L.append(M)},o=K=>{let L=a('#taxonomy-'+K),M=g({taxonomy:d[K]});L.append(M),tsfTT.triggerReset(),p(K)},p=K=>{let L=document.getElementById('taxonomy-'+K),M=L.querySelectorAll('.tabs-panel'),N=a(L).closest('.postbox');if(!(N.length&&N.hasClass('closed'))){let O=Array.prototype.slice.call(M).filter(Q=>{return 0<Q.offsetWidth||0<Q.offsetHeight||0<Q.getClientRects().length})[0];if(O){let P=O.scrollHeight>O.clientHeight?O.offsetWidth-O.clientWidth+25-2:25;tsf.states.isRTL?L.querySelector('.tsf-primary-term-selector-help-wrap').style.left=P+'px':L.querySelector('.tsf-primary-term-selector-help-wrap').style.right=P+'px'}}},q=K=>{p(K.data.taxonomy)},r=K=>{let L=h.cloneNode(!0);return L.setAttribute('title',d[K].i18n.makePrimary),L.setAttribute('aria-label',d[K].i18n.makePrimary),L},s=(K,L)=>{let M=document.getElementById('autodescription[_primary_term_'+K+']');M&&M instanceof Element&&(M.value=L)},t=(K,L)=>{return!L&&l[K]?l[K]:(l[K]=a('#'+K+'checklist, #'+K+'checklist-pop'),l[K])},u=(K,L)=>i[K].filter('[value="'+L+'"]'),v=(K,L)=>{let M=u(K,L).closest('label');M.length?(M.addClass('tsf-is-primary-term'),M.find('.tsf-set-primary-term').each(function(N,O){O.setAttribute('title',d[K].i18n.primary),O.setAttribute('aria-label',d[K].i18n.primary),O.querySelector('input').checked=!0}),s(K,L),m[K]=L):x(K)},w=K=>{let L=t(K).find('label');L.removeClass('tsf-is-primary-term'),L.find('.tsf-set-primary-term').each(function(M,N){N.setAttribute('title',d[K].i18n.makePrimary),N.setAttribute('aria-label',d[K].i18n.makePrimary),N.querySelector('input').checked=!1}),s(K,'')},x=K=>{let M,L=k[K].first();L.length&&(M=L.val()||'',v(K,M),m[K]=M)},y=K=>{let L=K.data.taxonomy,M=a(K.target).closest('label').find('input[type=checkbox]').val();return w(L),v(L,M),!1},z=K=>{let L=K.data.taxonomy;switch(K.target.checked?(C(L,K.target),A(L,K.target)):(D(L,K.target),B(L,K.target)),k[L].length){case 0:s(L,'');break;case 1:x(L);}},A=(K,L)=>{let M;u(K,L.value).each((N,O)=>{M=a(O).closest('label'),M.find('.tsf-primary-term-selector').length||M.append(r(K))})},B=(K,L)=>{let M,N;u(K,L.value).each((O,P)=>{M=a(P).closest('label'),N=M.hasClass('tsf-is-primary-term'),M.removeClass('tsf-is-primary-term'),M.find('.tsf-primary-term-selector').remove(),N&&x(K)})},C=(K,L)=>{j[K]=j[K].add('[value="'+L.value+'"]'),k[K]=k[K].add(L)},D=(K,L)=>{j[K]=j[K].not('[value="'+L.value+'"]'),k[K]=k[K].not('[value="'+L.value+'"]')},E=K=>{p(K.data.taxonomy)},F=function(K){let L=t(K,1);i[K]=L.find('input[type=checkbox]'),j[K]=L.find('input[type=checkbox]:checked');let N,M={};k[K]=j[K],k[K].each(function(O,P){N=a(P).val(),M[N]?k[K].splice(O,1):M[N]=!0})},G=(K,L,M)=>{M.hasOwnProperty('settings')&&M.settings.hasOwnProperty('what')&&(F(M.settings.what),H(M.settings.what),I(M.settings.what),p(M.settings.what))},H=K=>{let L='tsfShowPrimary'+K,M={taxonomy:K},N=t(K),O=a('#'+K+'div'),P=a('#'+K+'-tabs'),Q=N.closest('.postbox');N.off('click.'+L),N.on('click.'+L,'input[type="checkbox"]',M,z),N.on('click.'+L,'.tsf-primary-term-selector',M,y),O.off('wpListAddEnd.'+L),O.on('wpListAddEnd.'+L,'#'+K+'checklist',G),P.off('click.'+L),P.on('click.'+L,'a',M,q),Q.off('click.postboxes.'+L),Q.on('click.postboxes.'+L,M,E)},I=K=>{t(K).find('input[type="checkbox"]:checked').each((L,M)=>{A(K,M)}),d[K].primary?v(K,d[K].primary):x(K)};(()=>{for(let K in d)t(K).length&&(n(K),o(K),F(K),H(K),I(K))})()}};return a.extend({load:function(){a(document.body).on('tsf-onload',c)}},{})}(jQuery),jQuery(window.tsfPT.load);
