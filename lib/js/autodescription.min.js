window.autodescription={settingsChanged:!1,titleTagline:autodescriptionL10n.titleTagline,nonce:autodescriptionL10n.nonce,counterType:autodescriptionL10n.counterType,additionsClass:"",titleSeparator:autodescriptionL10n.titleSeparator,descriptionSeparator:autodescriptionL10n.descriptionSeparator,hasInput:autodescriptionL10n.hasInput,cropper:{},docTitles:function(){return jQuery("#autodescription_title, #autodescription-meta\\[doctitle\\], #autodescription-site-settings\\[homepage_title\\]")},docDescriptions:function(){return jQuery("#autodescription_description, #autodescription-meta\\[description\\], #autodescription-site-settings\\[homepage_description\\]")},
confirm:function(a){return confirm(a)},updateCharacterCountDescription:function(a){var b=jQuery(a.target),d=b.val().length,c=b.prop("placeholder").length;a=jQuery("#"+autodescription.escapeStr(a.target.id)+"_chars");var b=autodescription.additionsClass,f=autodescription.counterType,e,k="";0===d&&(d=c);100>d||175<=d?(c="tsf-count-bad",e=autodescription.getCounterName("bad")):137>d||155<d&&175>d?(c="tsf-count-okay",e=autodescription.getCounterName("okay")):(c="tsf-count-good",e=autodescription.getCounterName("good"));
b&&(c+=" "+b);f&&1!=f?2==f?k=e:3==f&&(k=d.toString()+" - "+e):k=d.toString();a.html(k).removeClass().addClass(c)},updateCharacterCountTitle:function(a){var b=jQuery(a.target),d=autodescriptionL10n.titleAdditions.length,c=autodescriptionL10n.blogDescription.length,f=autodescriptionL10n.siteTitle.length,e=b.val().length,k=b.prop("placeholder").length,h=jQuery("#autodescription-site-settings\\[homepage_title_tagline\\]").val(),g=3;a=jQuery("#"+autodescription.escapeStr(a.target.id)+"_chars");var l=0,
b=autodescription.additionsClass,m=autodescription.counterType,n="";autodescription.titleTagline||(g=d=0);0===e&&(0!==f?e=f:l=k);0!==e&&(0!==d&&"undefined"!==typeof h&&(d=h.length,d=0!==d?d:c),l=0===d?e:e+g+d);25>l||75<=l?(c="tsf-count-bad",e=autodescription.getCounterName("bad")):42>l||55<l&&75>l?(c="tsf-count-okay",e=autodescription.getCounterName("okay")):(c="tsf-count-good",e=autodescription.getCounterName("good"));b&&(c+=" "+b);m&&1!=m?2==m?n=e:3==m&&(n=l.toString()+" - "+e):n=l.toString();a.html(n).removeClass().addClass(c)},
escapeStr:function(a){return a?a.replace(/([\[\]\/])/g,"\\$1"):a},separatorSwitch:function(a){var b=jQuery(".tsf-sep-js");a=jQuery(a.target).val();autodescription.titleSeparator=a;"pipe"===a?b.text(" | "):"dash"===a?b.text(" - "):b.html(" &"+a+"; ")},separatorSwitchDesc:function(a){var b=jQuery("#autodescription-descsep-js");a=jQuery(a.target).val();"pipe"===a?b.text(" | "):"dash"===a?b.text(" - "):b.html(" &"+a+"; ")},statusBarHover:function(){var a=jQuery(".tsf-seo-bar-inner-wrap").find("a");a.on("mouseenter",
autodescription.statusBarHoverEnter);a.on("mousemove",autodescription.statusBarHoverMove);a.on("mouseleave",autodescription.statusBarHoverLeave)},statusBarHoverEnter:function(a){a=jQuery(a.target);var b=a.data("desc");void 0!==b&&0===a.find("div").length&&(a.append('<div class="tsf-explanation-desc">'+b+"<div></div></div>"),b=a.find("div.tsf-explanation-desc").height()+28,a.find("div.tsf-explanation-desc").css("top",a.position().top-b+"px"))},statusBarHoverMove:function(a){var b=jQuery(a.target);
a=a.pageX;var d=a-jQuery(".tsf-seo-bar-inner-wrap").offset().left-11,c=b.find(".tsf-explanation-desc"),b=c.find("div");if(1>d)b.css("left","0px");else if(void 0!==c.offset()){var f=c.width(),c=c.offset().left+f+11;a>c?b.css("left",f+"px"):b.css("left",d+"px")}},statusBarHoverLeave:function(a){jQuery(a.target).find("div.tsf-explanation-desc").remove()},removeDesc:function(){var a=jQuery(document.body.target),b=jQuery(".tsf-seo-bar-inner-wrap a");a.closest(b).length||b.find("div.tsf-explanation-desc").remove()},
tabToggle:function(a){var b=jQuery(a.target).prop("id");a=jQuery(a.target).prop("name");"undefined"!==typeof b&&(b=jQuery("#"+b+"-content"),a=jQuery("."+a+"-content"),"undefined"!==typeof b&&(a.removeClass("tsf-active-tab-content"),b.addClass("tsf-active-tab-content")))},taglineToggle:function(a){a=jQuery(a.target);var b=jQuery(".tsf-custom-blogname-js");a.is(":checked")?(b.css("display","inline"),autodescription.titleTagline=!0):(b.css("display","none"),autodescription.titleTagline=!1);autodescription.docTitles().trigger("keyup",
autodescription.updateCharacterCountTitle)},taglineToggleDesc:function(a){a=jQuery(a.target);var b=jQuery("#tsf-on-blogname-js");a.is(":checked")?b.css("display","inline"):b.css("display","none")},titleLocationToggle:function(a){a=jQuery(a.target).val();var b=jQuery(".tsf-title-additions-example-left"),d=jQuery(".tsf-title-additions-example-right");"right"===a?(b.css("display","none"),d.css("display","inline")):(b.css("display","inline"),d.css("display","none"))},titlePrefixToggle:function(a){a=jQuery(a.target);
var b=jQuery(".tsf-title-prefix-example");a.is(":checked")?b.css("display","none"):b.css("display","inline")},additionsToggleDesc:function(a){a=jQuery(a.target);var b=jQuery("#tsf-description-additions-js");a.is(":checked")?b.css("display","inline"):b.css("display","none")},taglineToggleOnload:function(){if(autodescription.hasInput){var a=jQuery("#tsf-title-tagline-toggle :input"),b=jQuery(".tsf-custom-blogname-js"),d=jQuery("#tsf-description-additions-toggle :input"),c=jQuery("#tsf-description-additions-js"),
f=jQuery("#tsf-description-onblogname-toggle :input"),e=jQuery("#tsf-on-blogname-js"),k=jQuery("#tsf-title-additions-toggle :input"),h=jQuery(".tsf-title-additions-js");a.is(":checked")?b.css("display","inline"):b.css("display","none");d.is(":checked")?c.css("display","inline"):c.css("display","none");f.is(":checked")?e.css("display","inline"):e.css("display","none");k.is(":checked")?h.css("display","none"):h.css("display","inline")}},titleProp:function(a){a=jQuery(a.target).val();var b=jQuery(".tsf-custom-title-js");
0===a.length?b.text(autodescriptionL10n.siteTitle):b.text(a)},taglineProp:function(a){a=jQuery(a.target).val();var b=jQuery(".tsf-custom-tagline-js"),d=jQuery("#autodescription-site-settings\\[homepage_title\\]"),c=jQuery("#tsf-home-title-location input:checked").val(),f=jQuery("#autodescription-site-settings\\[homepage_tagline\\]"),e=autodescriptionL10n.siteTitle,k=e,h=autodescriptionL10n.blogDescription,g=autodescription.getSep("title");f.is(":checked")&&(0!==a.length&&(h=a),k=0!==c.length&&"left"===
c?e+" "+g+" "+h:h+" "+g+" "+e);b.text(h);d.prop("placeholder",k);autodescription.docTitles().trigger("input",autodescription.updateCharacterCountTitle)},taglinePropTrigger:function(){jQuery("#autodescription-site-settings\\[homepage_title_tagline\\]").trigger("input",autodescription.taglineProp)},titleToggle:function(){var a=jQuery(event.target),b=jQuery(".tsf-title-additions-js");a.is(":checked")?b.css("display","none"):b.css("display","inline")},attachUnsavedChangesListener:function(){autodescription.hasInput&&
(jQuery(".tsf-metaboxes :input, #tsf-inpost-box .inside :input").not(".tsf-tab :input").change(function(){autodescription.registerChange()}),jQuery(".tsf-metaboxes input[type=text], .tsf-metaboxes textarea, #tsf-inpost-box .inside input[type=text], #tsf-inpost-box .inside textarea").not(".tsf-nav-tab-wrapper :input").on("input",function(){autodescription.registerChange()}),window.onbeforeunload=function(){if(autodescription.settingsChanged)return autodescriptionL10n.saveAlert},jQuery('.tsf-metaboxes input[type="submit"], #publishing-action input[type="submit"], #save-action input[type="submit"], a.submitdelete').click(function(){window.onbeforeunload=
null}))},registerChange:function(){autodescription.settingsChanged=!0},confirmedReset:function(){return confirm(autodescriptionL10n.confirmReset)},dynamicPlaceholder:function(a){var b=autodescriptionL10n.titleAdditions.length,d=jQuery("#tsf-title-placeholder");if(0===b)return a=jQuery(a.target),a.css("text-indent","initial"),d.empty();var b=!1,c=jQuery("#tsf-home-title-location input:checked").val(),f=autodescriptionL10n.isRTL;if("undefined"!==typeof c&&0!==c.length)"1"===f?"right"===c&&(b=!0):"left"===
c&&(b=!0);else{var c=autodescriptionL10n.titleLocation,e=autodescription.titleTagline;"1"===autodescriptionL10n.isHome?"1"===e&&("1"===f?"right"===c&&(b=!0):"left"===c&&(b=!0)):"1"===f?"left"===c&&(b=!0):"right"===c&&(b=!0)}c=jQuery("#tsf-title-tagline-toggle :input");if("undefined"!==typeof c&&0<c.length&&!c.is(":checked"))a=jQuery(a.target),a.css("text-indent","initial"),d.css("display","none");else{a=jQuery(a.target);var k=a.val(),h=jQuery("#tsf-title-offset"),g,l=(a.outerHeight(!0)-a.height())/
2,m=(a.outerWidth()-a.width())/2,c=(a.outerWidth(!0)-a.width())/2;g=jQuery("#autodescription-site-settings\\[homepage_title_tagline\\]").val();var e="left",n=autodescription.getSep("title");"1"===f&&(e="right");"undefined"!==typeof g&&0===g.length&&(g=autodescriptionL10n.blogDescription);b?(f=n+" "+autodescriptionL10n.titleAdditions,"undefined"!==typeof g&&0<g.length&&(f=n+" "+g),a.css("text-indent","initial")):(f=autodescriptionL10n.titleAdditions+" "+n,"undefined"!==typeof g&&0<g.length&&(f=g+" "+
n));h.text(k);h.css({fontFamily:a.css("fontFamily"),fontWeight:a.css("fontWeight"),letterSpacing:a.css("letterSpacing"),fontSize:a.css("fontSize")});g=h.width();g=a.width()-m-g;0>g&&(g=0);d.css({display:a.css("display"),lineHeight:a.css("lineHeight"),paddingTop:l+"px",paddingBottom:l+"px",fontFamily:a.css("fontFamily"),fontWeight:a.css("fontWeight"),fontSize:a.css("fontSize"),letterSpacing:a.css("letterSpacing"),maxWidth:g+"px"});"undefined"===typeof k||1>k.length?(b||a.css("text-indent","initial"),
d.empty()):(d.text(f),a.outerWidth()>c&&(b?d.css(e,m+c+h.width()+"px"):(b=m+d.width(),0>b&&(b=0),d.css(e,c+"px"),a.css("text-indent",b+"px"))))}},selectTitleInput:function(){var a=autodescription.docTitles();a.focus();if(a.setSelectionRange){var b=2*a.val().length;a.setSelectionRange(b,b)}else a.val(a.val()).focus()},dynamicPlaceholderOnLoad:function(){if(autodescription.hasInput){var a=autodescription.docTitles();"undefined"!==typeof a.val()&&(0<a.val().length?a.trigger("input",autodescription.dynamicPlaceholder):
a.trigger("input",autodescription.updateCharacterCountTitle))}},triggerDescriptionOnLoad:function(){autodescription.hasInput&&autodescription.docDescriptions().trigger("input",autodescription.updateCharacterCountDescription)},triggerTitleOnLoad:function(){autodescription.hasInput&&autodescription.docTitles().trigger("input",autodescription.updateCharacterCountTitle)},onLoadUnregisterChange:function(){autodescription.settingsChanged=!1},dismissNotice:function(a){var b=jQuery(a.target);b.parents(".tsf-notice").slideUp(200,
function(){b.remove()})},setAjaxLoader:function(a){jQuery(a).toggleClass("tsf-loading")},unsetAjaxLoader:function(a,b){var d="tsf-success",c=2500;b||(d="tsf-error",c=5E3);jQuery(a).removeClass("tsf-loading").addClass(d).fadeOut(c)},resetAjaxLoader:function(a){jQuery(a).stop().empty().prop("class","tsf-ajax").css("opacity","1").removeProp("style")},counterUpdate:function(a){autodescription.counterType+=1;3<autodescription.counterType&&(autodescription.counterType=0);autodescription.additionsClassInit();
var b=0;autodescription.resetAjaxLoader(".tsf-counter .tsf-ajax");autodescription.setAjaxLoader(".tsf-counter .tsf-ajax");jQuery.ajax({method:"POST",url:ajaxurl,datatype:"json",data:{action:"the_seo_framework_update_counter",nonce:autodescription.nonce,val:autodescription.counterType},async:!0,success:function(a){a=jQuery.parseJSON(a);"success"===a.type&&(b=1);autodescription.counterUpdatedResponse(".tsf-counter .tsf-ajax",b)}})},counterUpdatedResponse:function(a,b){switch(b){case 0:autodescription.unsetAjaxLoader(a,
!1);break;case 1:autodescription.unsetAjaxLoader(a,!0);break;default:autodescription.resetAjaxLoader(a)}},additionsClassInit:function(){if(autodescription.hasInput){var a=autodescription.counterType,b=autodescription.settingsChanged;1==a?(autodescription.additionsClass="tsf-counter-one",autodescription.counterType=1):2==a?(autodescription.additionsClass="tsf-counter-two",autodescription.counterType=2):3==a?(autodescription.additionsClass="tsf-counter-three",autodescription.counterType=3):(autodescription.additionsClass=
"tsf-counter-zero",autodescription.counterType=0);autodescription.updateCounters();autodescription.settingsChanged=b}},updateCounters:function(){autodescription.triggerTitleOnLoad();autodescription.triggerDescriptionOnLoad()},getCounterName:function(a){return autodescriptionL10n[a]},getSep:function(a){a="title"===a?autodescription.titleSeparator:autodescription.descriptionSeparator;"pipe"===a||"|"===a?a="|":"dash"===a||"-"===a?a="-":123>a.charCodeAt(0)&&(a=jQuery("<div/>").html("&"+a+";").text());
return a},openImageEditor:function(a){a.preventDefault();a.stopPropagation();if("undefined"!==typeof wp.media){a=jQuery(a.target);var b=a.data("inputid_url"),d=a.data("inputid_id"),c;c||(autodescription.extendCropper(),c=wp.media({button:{text:autodescriptionL10n.useThisImage,close:!1},states:[new wp.media.controller.Library({title:autodescriptionL10n.selectSocialImage,library:wp.media.query({type:"image"}),multiple:!1,date:!1,priority:20,suggestedWidth:1200,suggestedHeight:630}),new autodescription.cropper({imgSelectOptions:autodescription.calculateImageSelectOptions})]}),
c.on("select",function(){c.setState("cropper")}),c.on("cropped",function(a){var c=a.url;a=a.id;jQuery("#"+b).val(c);jQuery("#"+d).val(a)}),c.on("skippedcrop",function(a){var c=a.get("url"),f=a.get("id");a.get("width");a.get("height");jQuery("#"+b).val(c);jQuery("#"+d).val(f)}));c.open()}},extendCropper:function(){if("undefined"===typeof autodescription.cropper.control){var a;a=wp.media.controller.Cropper.extend({doCrop:function(a){var b=a.get("cropDetails"),c=autodescription.cropper.control;if(c.params.flex_width&&
c.params.flex_height)if(b.width===b.height)b.width>c.params.flex_width&&(b.dst_width=b.dst_height=c.params.flex_width);else if(b.width>c.params.flex_width||b.height>c.params.flex_height)if(b.width>b.height){var f=b.width/c.params.flex_width;b.dst_width=c.params.flex_width;b.dst_height=Math.round(b.height/f)}else f=b.height/c.params.flex_height,b.dst_height=c.params.flex_height,b.dst_width=Math.round(b.width/f);"undefined"===typeof b.dst_width&&(b.dst_width=0,b.dst_height=0);return wp.ajax.post("crop-image",
{nonce:a.get("nonces").edit,id:a.get("id"),context:c.id,cropDetails:b})}});a.prototype.control={};a.control={params:{flex_width:1500,flex_height:1500,width:1200,height:630}};autodescription.cropper=a}},calculateImageSelectOptions:function(a,b){var d=autodescription.cropper.control,c=!!parseInt(d.params.flex_width,10),f=!!parseInt(d.params.flex_height,10),e=a.get("width"),k=a.get("height"),h=parseInt(d.params.width,10),g=parseInt(d.params.height,10),l=h/g,m=h,n=g;b.set("control",d.params);b.set("canSkipCrop",
!autodescription.mustBeCropped(d.params.flex_width,d.params.flex_height,e,k));e/k>l?(g=k,h=g*l):(h=e,g=h/l);d=(e-h)/2;l=(k-g)/2;m={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:e,imageHeight:k,minWidth:m>h?h:m,minHeight:n>g?g:n,x1:d,y1:l,x2:h+d,y2:g+l};!1===f&&!1===c&&(m.aspectRatio=h+":"+g);!0===f&&(delete m.minHeight,m.maxWidth=e);!0===c&&(delete m.minWidth,m.maxHeight=k);return m},mustBeCropped:function(a,b,d,c){return d<=a&&c<=b?!1:!0},ready:function(a){a("div.updated, div.error, div.notice-warning").insertAfter("div.tsf-top-wrap");
a(document.body).ready(autodescription.additionsClassInit);a(document.body).ready(autodescription.dynamicPlaceholderOnLoad);a(document.body).ready(autodescription.taglineToggleOnload);a(document.body).ready(autodescription.statusBarHover);a(document.body).on("click touchstart MSPointerDown",autodescription.removeDesc);autodescription.attachUnsavedChangesListener();a(document.body).ready(autodescription.onLoadUnregisterChange);autodescription.docDescriptions().on("input",autodescription.updateCharacterCountDescription);
autodescription.docTitles().on("input",autodescription.updateCharacterCountTitle);a("#tsf-title-separator input").on("click",autodescription.separatorSwitch);a("#tsf-description-separator input").on("click",autodescription.separatorSwitchDesc);a(".tsf-js-confirm-reset").on("click.autodescription.autodescription_confirm_reset",autodescription.confirmedReset);a(".tsf-tab").on("click",autodescription.tabToggle);a("#tsf-title-tagline-toggle :input").on("click",autodescription.taglineToggle);a("#tsf-title-location input").on("click",
autodescription.titleLocationToggle);a("#title-prefixes-toggle :input").on("click",autodescription.titlePrefixToggle);a("#tsf-description-onblogname-toggle :input").on("click",autodescription.taglineToggleDesc);a("#tsf-description-additions-toggle :input").on("click",autodescription.additionsToggleDesc);a("#autodescription-site-settings\\[homepage_title\\]").on("input",autodescription.titleProp);a("#tsf-home-title-location :input, #tsf-title-tagline-toggle :input, #tsf-title-separator input").on("click",
autodescription.taglinePropTrigger);a("#autodescription-site-settings\\[homepage_title_tagline\\]").on("input",autodescription.taglineProp);a("#homepage-tab-general").on("change",autodescription.taglinePropTrigger);a("#autodescription-site-settings\\[title_rem_additions\\]").on("click",autodescription.titleToggle);autodescription.docTitles().on("input",autodescription.dynamicPlaceholder);a("#tsf-title-placeholder").on("click",autodescription.selectTitleInput);a(".tsf-dismiss").on("click",autodescription.dismissNotice);
a(".tsf-counter").on("click",autodescription.counterUpdate);a(".tsf-set-social-image").on("click",autodescription.openImageEditor)}};jQuery(autodescription.ready);
