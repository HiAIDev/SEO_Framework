'use strict';window.tsf={nonces:tsfL10n.nonces,i18n:tsfL10n.i18n,states:tsfL10n.states,params:tsfL10n.params,other:tsfL10n.other,settingsChanged:!1,counterType:0,hasInput:!1,additionsClass:'',cropper:{},confirm:function(a){return confirm(a)},escapeSring:function(a){if(!a.length)return'';var b={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#039;'};return a.replace(/[&<>"']/g,function(c){return b[c]})},getStringLength:function(a){let b,c=0;return a.length&&(b=document.createElement('span'),b.innerHTML=tsf.escapeSring(a),c=b.childNodes[0].nodeValue.length),+c},updatePixelCounter:function(a){let b=a.e,c=a.text,d=a.guideline,f=b.parentElement;if(f){let g=f.querySelector('.tsf-pixel-counter-bar'),j=f.querySelector('.tsf-pixel-counter-shadow');if(g&&j){j.innerHTML=tsf.escapeSring(c);let k=j.offsetWidth,l='',n='',o='tsf-pixel-counter-fit',q='tsf-pixel-counter-overflown';k>d?(n=100*(d/(k+2*(k-d)/3))+'%',l=q):(n=100*(k/d)+'%',l=o);let s,r=g.querySelector('.tsf-pixel-counter-fluid');s=tsf.i18n.pixelsUsed.replace(/%1\$d/g,k),s=s.replace(/%2\$d/g,d),g.classList.remove(o,q),g.classList.add(l),g.dataset.desc=s,g.setAttribute('aria-label',s),r.style.width=n,tsf._triggerTooltipUpdate(g)}}},_initTitleInputs:function(){if(tsf.hasInput){let a=jQuery('#autodescription_title, #autodescription-meta\\[doctitle\\], #autodescription-site-settings\\[homepage_title\\]');if(a.length){let b,c,d,g,f='',j='',k=tsf.params.titleSeparator,l=tsf.params.objectTitle,n=tsf.states.useTagline,o=tsf.states.isRTL,q=tsf.states.isPrivate,r=tsf.states.isPasswordProtected;b=o?'after':'before';const s=function(){let O='before';tsf.states.isSettingsPage?o?'right'===jQuery('#tsf-home-title-location input:checked').val()&&(O='after'):'left'===jQuery('#tsf-home-title-location input:checked').val()&&(O='after'):tsf.states.isHome?o?'right'===tsf.params.titleLocation&&(O='after'):'left'===tsf.params.titleLocation&&(O='after'):o?'left'===tsf.params.titleLocation&&(O='after'):'right'===tsf.params.titleLocation&&(O='after'),c=O};s();const t=function(){let O='';if(!tsf.states.isSettingsPage)tsf.states.isHome?n&&(O=tsf.params.blogDescription):n&&(O=tsf.params.titleAdditions);else if(n){let P=document.getElementById('autodescription-site-settings[homepage_title_tagline]'),Q=P?P.value:'';O=Q.length?Q:tsf.params.blogDescription}O.length&&(O=tsf.escapeSring(O),'before'===c?O=O+' '+k+' ':'after'===c?O=' '+k+' '+O:void 0),j=O.length?O:'',g=document.getElementById('tsf-title-placeholder'),j.length&&g&&(g.innerHTML=j)};t();const u=function(){let O='';q?O=tsf.i18n.privateTitle:r&&(O=tsf.i18n.protectedTitle),O.length&&(O=tsf.escapeSring(O),'before'===b?O+=' ':'after'===b?O=' '+O:void 0),f=O.length?O:'',f.length&&d&&(d.innerHTML=f),d=document.getElementById('tsf-title-placeholder-prefix'),f.length&&d&&(d.innerHTML=f)};u();const v=function(O){if(g||d){let P=jQuery(O.target),Q=P.val(),R=!!j.length,S=!!f.length;if(!R&&g&&(g.style.display='none'),!S&&d&&(d.style.display='none'),!R&&!S)return void P.css('text-indent','initial');if(!Q.length)return P.css('text-indent','initial'),g&&(g.style.display='none'),void(d&&(d.style.display='none'));let T=P.outerWidth(),U=(P.outerHeight(!0)-P.height())/2,V=(T-P.innerWidth())/2,W=o?'right':'left',X=(P.outerWidth(!0)-P.width())/2,Y={display:P.css('display'),lineHeight:P.css('lineHeight'),fontFamily:P.css('fontFamily'),fontWeight:P.css('fontWeight'),fontSize:P.css('fontSize'),letterSpacing:P.css('letterSpacing'),paddingTop:U+'px',paddingBottom:U+'px'},Z=jQuery(d),_=jQuery(g),aa=0,ba=0,ca=0,da=0,ea=0;if(S&&(Z.css(Y),ea=Z.width(),da+=ea,ca+=X),R){let fa=0;switch(function(){let ga=jQuery('#tsf-title-offset');ga.text(Q),ga.css({fontFamily:Y.fontFamily,fontWeight:Y.fontWeight,letterSpacing:Y.letterSpacing,fontSize:Y.fontSize}),fa=ga.width()}(),aa=P.width()-V-fa-ea,aa=0>aa?0:aa,_.css(Y),c){case'before':let ga=_.width();0>ga&&(ga=0),da+=ga,ca+=ga,ba+=X;break;case'after':ba+=X+fa+ea;}}S&&Z.css({[W]:ca+'px'}),R&&_.css({[W]:ba+'px',maxWidth:aa+'px'}),P.css('text-indent',da+'px')}},x=function(){let P='',Q=!!j.length,R=!!f.length,S=j,T=f;tsf.states.isTermEdit&&tsf.params.termName&&(T=o?' :'+tsf.params.termName:tsf.params.termName+': ',R=tsf.states.useTermPrefix),P=l,R&&('before'===b?P=T+P:'after'===b?P+=T:void 0),Q&&('before'===c?P=S+P:'after'===c?P+=S:void 0),a.prop('placeholder',P)},y=function(O){let P=document.getElementById(O.target.id+'_chars');if(P){let Q=0,R=O.target,S='',T=tsf.counterType,U='',V='';Q=1>R.value.length?tsf.getStringLength(R.placeholder):(f?tsf.getStringLength(f):0)+tsf.getStringLength(R.value)+(j?tsf.getStringLength(j):0),25>Q||75<=Q?(S+='tsf-count-bad',U=tsf.getCounterName('bad')):42>Q||55<Q?(S+='tsf-count-okay',U=tsf.getCounterName('okay')):(S+='tsf-count-good',U=tsf.getCounterName('good')),T&&1!=T?2==T?V=U:3==T&&(V=Q.toString()+' - '+U):V=Q.toString(),P.innerHTML=V,tsf.additionsClass&&(S+=' '+tsf.additionsClass),P.className!==S&&(P.className=S)}},z=function(O){let P=document.getElementById(O.target.id+'_pixels');if(P){let Q='';1>O.target.value.length?Q=O.target.placeholder:(Q=O.target.value,f.length&&('before'===b?Q=f+Q:'after'===b?Q+=f:void 0),j.length&&('before'===c?Q=j+Q:'after'===c?Q+=j:void 0));let R={e:P,text:Q,guideline:600};tsf.updatePixelCounter(R)}};a.on('input.tsfUpdateTitles',function(O){v(O),x(),y(O),z(O)});a.on('tsf-update-title-counter',function(O){y(O)});const C=function(){a.trigger('tsf-update-title-counter')},D=function(){a.trigger('input.tsfUpdateTitles')};D();const E=function(){t(),D()};jQuery('#autodescription-site-settings\\[homepage_title_tagline\\]').on('input',E),jQuery('#autodescription-site-settings\\[homepage_tagline\\]').on('change',E);let F=0;const G=function(){clearTimeout(F),F=setTimeout(function(){D()},50)};jQuery(window).on('tsf-counter-updated',G);jQuery('#tsf-title-tagline-toggle :input').on('click',function(O){let P=n;jQuery(O.target).is(':checked')?(jQuery('.tsf-custom-blogname-js').css('display','inline'),n=!0):(jQuery('.tsf-custom-blogname-js').css('display','none'),n=!1),P^n&&(t(),G())});jQuery('#visibility .save-post-visibility').on('click',function(){let P=jQuery('#visibility').find('input:radio:checked').val();switch(q=!1,r=!1,P){case'password':let Q=jQuery('#visibility').find('#post_password').val();r=!!Q&&!!Q.length;break;case'private':q=!0;break;default:case'public':}u(),G()});jQuery('#tsf-title-separator :input').on('click',function(O){let P=jQuery(O.target).val(),Q='';Q='pipe'===P?'|':'dash'===P?'-':jQuery('<div/>').html('&'+P+';').text(),k=Q,jQuery('.tsf-sep-js').text(' '+k+' '),t(),G()});const K=function(){let O=tsf.settingsChanged;D(),tsf.settingsChanged=O};jQuery('#autodescription-homepage-settings > button, #tsf-inpost-box > button').on('click',K),jQuery('#homepage-tab-general').on('tsf-tab-toggled',K);jQuery('#tsf-home-title-location :input').on('click',function(){s(),t(),G()});const M=function(O){let P=O.target.value;P=P.trim(),l=P.length?P:tsf.params.untitledTitle,x(),C()};jQuery('#edittag #name').on('input',M),jQuery('#titlewrap #title').on('input',M);(function(){let O=0,P=window.innerWidth;jQuery(window).resize(function(){clearTimeout(O),O=setTimeout(function(){let Q=window.innerWidth;P<Q?782>=P&&782<=Q&&K():782<=P&&782>=Q&&K(),P=Q},50)})})()}}},_initUnboundTitleSettings:function(){if(tsf.hasInput){let a=jQuery('#autodescription_title, #autodescription-meta\\[doctitle\\], #autodescription-site-settings\\[homepage_title\\]');jQuery('#tsf-title-placeholder, #tsf-title-placeholder-prefix').on('click',function(k){let l=jQuery(k.target).siblings(a)[0];if('function'==typeof l.setSelectionRange){l.focus();let n=2*l.value.length;l.setSelectionRange(n,n)}else{let n=l.value;l.value='',l.focus(),l.value=n}});jQuery('#autodescription-site-settings\\[title_rem_additions\\]').on('click',function(k){jQuery(k.target).is(':checked')?jQuery('.tsf-title-additions-js').css('display','none'):jQuery('.tsf-title-additions-js').css('display','inline')});jQuery('#tsf-title-location input').on('click',function(k){let l=jQuery('.tsf-title-additions-example-left'),n=jQuery('.tsf-title-additions-example-right');'right'===jQuery(k.target).val()?(l.css('display','none'),n.css('display','inline')):(l.css('display','inline'),n.css('display','none'))});jQuery('#autodescription-site-settings\\[homepage_title\\]').on('input',function(k){let l=k.target.value||'',n=jQuery('.tsf-custom-title-js');0===l.length?n.text(tsf.params.objectTitle):n.text(l)});jQuery('#autodescription-site-settings\\[homepage_title_tagline\\]').on('input',function(k){let l=k.target.value||'',n=jQuery('.tsf-custom-tagline-js');0===l.length?(n.text(tsf.params.blogDescription),0===tsf.params.blogDescription.length?jQuery('#tsf-home-title-location .tsf-sep-js').hide():jQuery('#tsf-home-title-location .tsf-sep-js').show()):(n.text(l),jQuery('#tsf-home-title-location .tsf-sep-js').show())}),jQuery('#autodescription-site-settings\\[homepage_title_tagline\\]').trigger('input');jQuery('#title-prefixes-toggle :input').on('click',function(k){let l=jQuery(k.target),n=jQuery('.tsf-title-prefix-example');l.is(':checked')?n.css('display','none'):n.css('display','inline')})}},_initDescInputs:function(){if(tsf.hasInput){let a=jQuery('#autodescription_description, #autodescription-meta\\[description\\], #autodescription-site-settings\\[homepage_description\\]');if(a.length){let b=tsf.params.descriptionSeparator;jQuery('#tsf-description-separator input').on('click',function(n){let o=jQuery(n.target).val(),q='';q='pipe'===o?'|':'dash'===o?'-':jQuery('<div/>').html('&'+o+';').text(),b=q,jQuery('#autodescription-descsep-js').text(' '+b+' '),l()});const d=function(n){let o=document.getElementById(n.target.id+'_chars');if(o){let q=0,r=n.target,s='',t=tsf.counterType,u='',v='';q=1>r.value.length?tsf.getStringLength(r.placeholder):tsf.getStringLength(r.value),100>q||175<=q?(s+='tsf-count-bad',u=tsf.getCounterName('bad')):137>q||155<q?(s+='tsf-count-okay',u=tsf.getCounterName('okay')):(s+='tsf-count-good',u=tsf.getCounterName('good')),t&&1!=t?2==t?v=u:3==t&&(v=q.toString()+' - '+u):v=q.toString(),o.innerHTML=v,tsf.additionsClass&&(s+=' '+tsf.additionsClass),o.className!==s&&(o.className=s)}},f=function(n){let o=document.getElementById(n.target.id+'_pixels');if(o){let q='';q=1>n.target.value.length?n.target.placeholder:n.target.value;let r={e:o,text:q,guideline:920};tsf.updatePixelCounter(r)}};a.on('input.tsfUpdateDescriptions',function(n){d(n),f(n)});const j=function(){a.trigger('input.tsfUpdateDescriptions')};j();let k=0;const l=function(){clearTimeout(k),k=setTimeout(function(){j()},50)};jQuery(window).on('tsf-counter-updated',l)}}},_initToolTips:function(){let a=0,b=!1;const c=function(){b=!0,clearTimeout(a),a=setTimeout(function(){b=!1},250)},d=function(r,s){s=s||!1;let t='pointerdown.tsfTT touchstart.tsfTT click.tsfTT',u=jQuery(r);s?(u.off('mousemove mouseleave mouseout tsf-tooltip-update'),jQuery(document.body).off(t)):(u.on({mousemove:k,mouseleave:l,mouseout:l}),jQuery(document.body).off(t).on(t,n)),u.on('tsf-tooltip-update',g)},f=function(r){d(r,!0)},g=function(r){if(r.target.classList.contains('tsf-tooltip-item')){let s=r.target.querySelector('.tsf-tooltip-text');s instanceof Element&&(s.innerHTML=r.target.dataset.desc)}},j=function(r){let s=jQuery(r.target),t=r.target.dataset.desc;if(t&&0===s.find('div').length){let u=jQuery('<div class="tsf-tooltip"><div class="tsf-tooltip-text">'+t+'</div><div class="tsf-tooltip-arrow"></div></div>');s.append(u);let v=u.outerHeight()+9;u.css('top',-v+'px'),u.css('width',s.width()+'px')}},k=function(r){let s=jQuery(r.target),t=r.originalEvent&&r.originalEvent.pageX||r.pageX,u=t-s.closest('.tsf-tooltip-wrap').offset().left-12,v=s.find('.tsf-tooltip'),x=v.find('.tsf-tooltip-arrow');if(8>=u)x.css('left','8px');else if(void 0!==v.offset()){let y=v.width(),z=v.offset().left+y+12;t>z?x.css('left',y+'px'):x.css('left',u+'px')}},l=function(r){b||(jQuery(r.target).find('.tsf-tooltip').remove(),f(r.target))},n=function(r){c();let v,t='.tsf-tooltip',u=jQuery(r.target);if(u.hasClass('tsf-tooltip-item')&&(v=u.find(t)),!v){let x=u.children('.tsf-tooltip-item');x.length&&(v=x.find(t))}v&&v.length?jQuery(t).not(v).remove():jQuery(t).remove()},o=function(r){if(!b){let s=!1;switch(r.type){case'mouseenter':break;case'pointerdown':case'touchstart':s=!0;break;default:}if(r.target.classList.contains('tsf-tooltip-item'))s&&n(r),j(r),k(r),d(r.target);else{let t=r.target.querySelector('.tsf-tooltip-item:hover'),u=new jQuery.Event(r.type);u.pageX=r.originalEvent&&r.originalEvent.pageX||r.pageX,t?(tsfL10n.states.debug&&console.log('Tooltip event warning: delagation'),jQuery(t).trigger(u)):(tsfL10n.states.debug&&console.log('Tooltip event warning: bubbling'),jQuery(r.target).closest('.tsf-tooltip-wrap').find('.tsf-tooltip-item:hover').trigger(u))}return!1}},q=function(){let r=jQuery('.tsf-tooltip-wrap');r.off('mouseenter pointerdown touchstart'),r.on('mouseenter pointerdown touchstart','.tsf-tooltip-item',o)};q(),jQuery(window).on('tsf-reset-tooltips',q)},tabToggle:function(a){let b=jQuery(a.target);if(b.is(':checked')){let c=b.prop('id'),d=b.prop('name');if('undefined'!=typeof d){let f='tsf-active-tab-content',g=jQuery('#'+c+'-content'),j=jQuery('.'+f);if(!g.is(j)&&'undefined'!=typeof g){let k=jQuery('.'+d+'-content');k.fadeOut(150,function(){jQuery(this).removeClass(f)}),setTimeout(function(){g.addClass(f).fadeIn(250)},150),setTimeout(function(){jQuery('#'+c).trigger('tsf-tab-toggled')},175)}}}},flexTabToggle:function(a){let b=jQuery(a.target);if(b.is(':checked')){let c=b.prop('id'),d=b.prop('name');if('undefined'!=typeof d){let f='tsf-flex-tab-content-active',g=jQuery('#'+c+'-content'),j=jQuery('.'+f);if(!g.is(j)&&'undefined'!=typeof g){let k=jQuery('.'+d+'-content');k.fadeOut(150,function(){jQuery(this).removeClass(f)}),setTimeout(function(){g.addClass(f).fadeIn(250)},150),setTimeout(function(){jQuery('#'+c).trigger('tsf-flex-tab-toggled')},175)}}}},setTabsOnload:function(){if(tsf.hasInput)if(tsf.states.isSettingsPage){let a=jQuery('.tsf-nav-tab-wrapper .tsf-tab:nth-of-type(n+2) input:checked');a.length&&a.each(function(){let c=jQuery(this),d=c.prop('id'),f=c.prop('name');if('undefined'!=typeof f){let g='tsf-active-tab-content',j=jQuery('#'+d+'-content');if('undefined'!=typeof j){let k=jQuery('.'+f+'-content');k.removeClass(g),j.addClass(g),setTimeout(function(){jQuery('#'+d).trigger('tsf-tab-toggled')},20)}}})}else;},taglineToggleDesc:function(a){let b=jQuery(a.target),c=jQuery('#tsf-on-blogname-js');b.is(':checked')?c.css('display','inline'):c.css('display','none')},additionsToggleDesc:function(a){let b=jQuery(a.target),c=jQuery('#tsf-description-additions-js');b.is(':checked')?c.css('display','inline'):c.css('display','none')},taglineToggleOnload:function(){if(tsf.hasInput){let a=jQuery('#tsf-title-tagline-toggle :input'),b=jQuery('.tsf-custom-blogname-js'),c=jQuery('#tsf-description-additions-toggle :input'),d=jQuery('#tsf-description-additions-js'),f=jQuery('#tsf-description-onblogname-toggle :input'),g=jQuery('#tsf-on-blogname-js'),j=jQuery('#tsf-title-additions-toggle :input'),k=jQuery('.tsf-title-additions-js');a.is(':checked')?b.css('display','inline'):b.css('display','none'),c.is(':checked')?d.css('display','inline'):d.css('display','none'),f.is(':checked')?g.css('display','inline'):g.css('display','none'),j.is(':checked')?k.css('display','none'):k.css('display','inline')}},attachUnsavedChangesListener:function(){if(tsf.hasInput){let a=function(d){tsf.settingsChanged||tsf.registerChange(),jQuery(b).not(c).off(d.type,a)},b='.tsf-metaboxes :input, #tsf-inpost-box .inside :input',c='.tsf-tab :input, .tsf-flex-nav-tab :input';jQuery(b).not(c).on('change',a),b='.tsf-metaboxes input[type=text], .tsf-metaboxes textarea, #tsf-inpost-box .inside input[type=text], #tsf-inpost-box .inside textarea',c='.tsf-nav-tab-wrapper input, .tsf-flex-nav-tab-wrapper input',jQuery(b).not(c).on('input',a),window.onbeforeunload=function(){if(tsf.settingsChanged)return tsf.i18n.saveAlert},jQuery('.tsf-metaboxes input[type="submit"], #publishing-action input[type="submit"], #save-action input[type="submit"], a.submitdelete').click(function(){window.onbeforeunload=null})}},registerChange:function(){tsf.settingsChanged=!0},confirmedReset:function(){return confirm(tsf.i18n.confirmReset)},onLoadUnregisterChange:function(){tsf.settingsChanged=!1},dismissNotice:function(a){jQuery(a.target).parents('.tsf-notice').slideUp(200,function(){this.remove()})},setAjaxLoader:function(a){jQuery(a).toggleClass('tsf-loading')},unsetAjaxLoader:function(a,b){let c='tsf-success',d=2500;b||(c='tsf-error',d=5e3),jQuery(a).removeClass('tsf-loading').addClass(c).fadeOut(d)},resetAjaxLoader:function(a){jQuery(a).stop().empty().prop('class','tsf-ajax').css('opacity','1').removeProp('style')},counterUpdate:function(){++tsf.counterType,3<tsf.counterType&&(tsf.counterType=0),tsf.updateCounterClasses();let b='.tsf-counter-wrap .tsf-ajax',c=0;tsf.resetAjaxLoader(b),tsf.setAjaxLoader(b);let d={method:'POST',url:ajaxurl,datatype:'json',data:{action:'the_seo_framework_update_counter',nonce:tsf.nonces.edit_posts,val:tsf.counterType},async:!0,success:function(f){f=jQuery.parseJSON(f),'success'===f.type&&(c=1),tsf.counterUpdatedResponse(b,c)}};jQuery.ajax(d)},counterUpdatedResponse:function(a,b){switch(b){case 0:tsf.unsetAjaxLoader(a,!1);break;case 1:tsf.unsetAjaxLoader(a,!0);break;default:tsf.resetAjaxLoader(a);}},updateCounterClasses:function(){if(tsf.hasInput){let a=tsf.counterType;1==a?(tsf.additionsClass='tsf-counter-one',tsf.counterType=1):2==a?(tsf.additionsClass='tsf-counter-two',tsf.counterType=2):3==a?(tsf.additionsClass='tsf-counter-three',tsf.counterType=3):(tsf.additionsClass='tsf-counter-zero',tsf.counterType=0),tsf._triggerCounterUpdate()}},getCounterName:function(a){return tsf.i18n[a]},openImageEditor:function(a){if(jQuery(a.target).prop('disabled')||'undefined'==typeof wp.media)return a.preventDefault(),void a.stopPropagation();var d,b=jQuery(a.target),c=b.data('inputid');if(d)return void d.open();a.preventDefault(),a.stopPropagation(),tsf.extendCropper(),d=wp.media({button:{text:tsf.other[c].frame_button,close:!1},states:[new wp.media.controller.Library({title:tsf.other[c].frame_title,library:wp.media.query({type:'image'}),multiple:!1,date:!1,priority:20,suggestedWidth:1200,suggestedHeight:630}),new tsf.cropper({imgSelectOptions:tsf.calculateImageSelectOptions})]});const f=function(){d.setState('cropper')};d.off('select',f),d.on('select',f);const g=function(l){let n=l.url,o=l.id,q=l.width,r=l.height;jQuery('#'+c+'-url').val(n),jQuery('#'+c+'-id').val(o)};d.off('cropped',g),d.on('cropped',g);const j=function(l){let n=l.get('url'),o=l.get('id'),q=l.get('width'),r=l.get('height');jQuery('#'+c+'-url').val(n),jQuery('#'+c+'-id').val(o)};d.off('skippedcrop',j),d.on('skippedcrop',j);const k=function(){jQuery('#'+c+'-select').text(tsf.other[c].change),jQuery('#'+c+'-url').prop('readonly',!0).css('opacity',0).animate({opacity:1},{queue:!0,duration:1000},'swing'),tsf.appendRemoveButton(b,c,!0),tsf.registerChange()};d.off('skippedcrop cropped',k),d.on('skippedcrop cropped',k),d.open()},appendRemoveButton:function(a,b,c){a&&b&&!jQuery('#'+b+'-remove').length&&(a.after('<a href="javascript:void(0)" id="'+b+'-remove" class="tsf-remove-social-image button button-small" data-inputid="'+b+'" title="'+tsf.other[b].remove_title+'">'+tsf.other[b].remove+'</a>'),c&&jQuery('#'+b+'-remove').css('opacity',0).animate({opacity:1},{queue:!0,duration:1000},'swing')),tsf.resetImageEditorActions()},removeEditorImage:function(a){var b=jQuery(a.target),c=b.data('inputid');jQuery('#'+c+'-select').prop('disabled')||(jQuery('#'+c+'-select').addClass('disabled').prop('disabled',!0),jQuery('#'+c+'-remove').addClass('disabled').prop('disabled',!0).fadeOut(500,function(){jQuery(this).remove(),jQuery('#'+c+'-select').text(tsf.other[c].select).removeClass('disabled').removeProp('disabled')}),jQuery('#'+c+'-url').val('').removeProp('readonly').css('opacity',0).animate({opacity:1},{queue:!0,duration:500},'swing'),jQuery('#'+c+'-id').val(''),tsf.registerChange())},extendCropper:function(){if('undefined'==typeof tsf.cropper.control){var a;let b=wp.media.controller;return a=b.Cropper.extend({doCrop:function(c){let d=c.get('cropDetails'),f=tsf.cropper.control;if(f.params.flex_width&&f.params.flex_height)if(d.width===d.height)d.width>f.params.flex_width&&(d.dst_width=d.dst_height=f.params.flex_width);else if(d.width>f.params.flex_width||d.height>f.params.flex_height)if(d.width>d.height){let g=d.width/f.params.flex_width;d.dst_width=f.params.flex_width,d.dst_height=Math.round(d.height/g)}else{let g=d.height/f.params.flex_height;d.dst_height=f.params.flex_height,d.dst_width=Math.round(d.width/g)}return'undefined'==typeof d.dst_width&&(d.dst_width=0,d.dst_height=0),wp.ajax.post('tsf-crop-image',{nonce:tsf.nonces.upload_files,id:c.get('id'),context:'tsf-image',cropDetails:d})}}),a.prototype.control={},a.control={params:{flex_width:4096,flex_height:4096,width:1200,height:630}},void(tsf.cropper=a)}},calculateImageSelectOptions:function(a,b){let r,s,t,c=tsf.cropper.control,d=!!parseInt(c.params.flex_width,10),f=!!parseInt(c.params.flex_height,10),g=parseInt(c.params.width,10),j=parseInt(c.params.height,10),k=a.get('width'),l=a.get('height'),n=g/j,o=g,q=j;return b.set('control',c.params),b.set('canSkipCrop',!tsf.mustBeCropped(c.params.flex_width,c.params.flex_height,k,l)),k/l>n?(j=l,g=j*n):(g=k,j=g/n),r=(k-g)/2,s=(l-j)/2,t={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:k,imageHeight:l,minWidth:o>g?g:o,minHeight:q>j?j:q,x1:r,y1:s,x2:g+r,y2:j+s},!1==f&&!1==d&&(t.aspectRatio=g+':'+j),!0==f&&(t.minHeight=200,t.maxWidth=k),!0==d&&(t.minWidth=200,t.maxHeight=l),t},mustBeCropped:function(a,b,c,d){return c<=a&&d<=b?!1:!0},resetImageEditorActions:function(){jQuery('.tsf-remove-social-image').off('click',tsf.removeEditorImage),jQuery('.tsf-remove-social-image').on('click',tsf.removeEditorImage)},setupImageEditorActions:function(){jQuery('.tsf-set-social-image').off('click',tsf.openImageEditor),jQuery('.tsf-remove-social-image').off('click',tsf.removeEditorImage),jQuery('.tsf-set-social-image').on('click',tsf.openImageEditor),jQuery('.tsf-remove-social-image').on('click',tsf.removeEditorImage)},checkImageEditorInput:function(){let a=jQuery('.tsf-set-social-image');if(a.length){let b='',c='';jQuery.each(a,function(d,f){b=jQuery(f).data('inputid'),c=jQuery('#'+b+'-id'),c.length&&0<c.val()&&(jQuery('#'+b+'-url').prop('readonly',!0),tsf.appendRemoveButton(jQuery(f),b,!1)),jQuery('#'+b+'-url').val()&&jQuery('#'+b+'-select').text(tsf.other[b].change)})}},setColorOnload:function(){let a=jQuery('.tsf-color-picker');a.length&&jQuery.each(a,function(b,c){let d=jQuery(c),f='',g=d.data('tsf-default-color');d.wpColorPicker({defaultColor:g,width:238,change:function(){f=d.wpColorPicker('color'),''==f&&(f=g),d.val(f),tsf.registerChange()},clear:function(){d.parent().siblings('.wp-color-result').css('backgroundColor',g),tsf.registerChange()},palettes:!1})})},_doFlexResizeListener:function(){if(jQuery('.tsf-flex').length){tsf._setResizeListeners();var a=0,b={},c=0,d=jQuery('.tsf-flex-nav-tab-wrapper');jQuery(window).on('tsf-flex-resize',function(){clearTimeout(a);let f=0;a=setTimeout(function(){if(d.length){let g=jQuery('.tsf-flex-nav-tab-inner'),j=d.width(),k=g.width(),l=jQuery('.tsf-flex-nav-name');b.tabWrapper||(b.tabWrapper={},b.tabWrapper.outer=0,b.tabWrapper.inner=0,b.tabWrapper.shown=1),!b.tabWrapper.shown&&b.tabWrapper.outer<j&&(l.fadeIn(250),setTimeout(function(){k=g.width()},f)),setTimeout(function(){k>j?(l.hide(),b.tabWrapper.shown=0):b.tabWrapper.outer<j&&(l.fadeIn(250),b.tabWrapper.shown=1)},2*f),setTimeout(function(){b.tabWrapper.outer=j,b.tabWrapper.inner=k},3*f)}},c),f=10,c=75}),jQuery(window).trigger('tsf-flex-resize')}},_setResizeListeners:function(){jQuery(window).on('resize orientationchange',tsf._triggerResize),jQuery('#collapse-menu').click(tsf._triggerResize),jQuery('.columns-prefs :input[type=radio]').change(tsf._triggerResize),jQuery('.meta-box-sortables').on('sortupdate',tsf._triggerResize)},_triggerTooltipReset:function(){jQuery(window).trigger('tsf-reset-tooltips')},_triggerTooltipUpdate:function(a){jQuery(a).trigger('tsf-tooltip-update')},_triggerResize:function(){jQuery(window).trigger('tsf-flex-resize')},_triggerCounterUpdate:function(){jQuery(window).trigger('tsf-counter-updated')},_triggerReady:function(){jQuery(document.body).trigger('tsf-ready')},_doReady:function(){tsf.updateCounterClasses(),tsf._initTitleInputs(),tsf._initUnboundTitleSettings(),tsf._initDescInputs(),tsf.setTabsOnload(),tsf.taglineToggleOnload(),tsf._initToolTips(),tsf.setupImageEditorActions(),tsf.checkImageEditorInput(),tsf.setColorOnload(),tsf.attachUnsavedChangesListener(),tsf.onLoadUnregisterChange(),tsf._triggerReady(),tsf._doFlexResizeListener()},setupVars:function(){tsf.counterType=parseInt(tsf.states.counterType),tsf.hasInput=tsf.states.hasInput},ready:function(a){tsf.setupVars(),a('div.updated, div.error, div.notice-warning').insertAfter('div.tsf-top-wrap'),a(document.body).ready(tsf._doReady),a('.tsf-js-confirm-reset').on('click',tsf.confirmedReset),a('.tsf-tabs-radio').on('change',tsf.tabToggle),a('.tsf-flex-nav-tab-radio').on('change',tsf.flexTabToggle),a('#tsf-description-onblogname-toggle :input').on('click',tsf.taglineToggleDesc),a('#tsf-description-additions-toggle :input').on('click',tsf.additionsToggleDesc),a('.tsf-dismiss').on('click',tsf.dismissNotice),a('.tsf-counter').on('click',tsf.counterUpdate)}},jQuery(tsf.ready);
