'use strict';function _defineProperty(t,s,a){return s in t?Object.defineProperty(t,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[s]=a,t}window.tsf={nonces:tsfL10n.nonces,i18n:tsfL10n.i18n,states:tsfL10n.states,params:tsfL10n.params,other:tsfL10n.other,settingsChanged:!1,counterType:0,hasInput:!1,additionsClass:'',cropper:{},confirm:function(t){function s(){return t.apply(this,arguments)}return s.toString=function(){return t.toString()},s}(function(t){return confirm(t)}),escapeSring:function escapeSring(t){if(!t.length)return'';var s={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#039;'};return t.replace(/[&<>"']/g,function(a){return s[a]})},getStringLength:function getStringLength(t){var s,a=0;return t.length&&(s=document.createElement('span'),s.innerHTML=tsf.escapeSring(t),a=s.childNodes[0].nodeValue.length),+a},updatePixelCounter:function updatePixelCounter(t){var s=t.e,a=t.text,o=t.guideline,n=s.parentElement;if(n){var r=n.querySelector('.tsf-pixel-counter-bar'),l=n.querySelector('.tsf-pixel-counter-shadow');if(r&&l){l.innerHTML=tsf.escapeSring(a);var d=l.offsetWidth,g='',c='',f='tsf-pixel-counter-fit',u='tsf-pixel-counter-overflown';d>o?(c=100*(o/(d+2*(d-o)/3))+'%',g=u):(c=100*(d/o)+'%',g=f);var b,y=r.querySelector('.tsf-pixel-counter-fluid');b=tsf.i18n.pixelsUsed.replace(/%1\$d/g,d),b=b.replace(/%2\$d/g,o),r.classList.remove(f,u),r.classList.add(g),r.dataset.desc=b,r.setAttribute('aria-label',b),y.style.width=c,tsf._triggerTooltipUpdate(r)}}},_initTitleInputs:function _initTitleInputs(){if(tsf.hasInput){var t=jQuery('#autodescription_title, #autodescription-meta\\[doctitle\\], #autodescription-site-settings\\[homepage_title\\]');if(t.length){var s,a,o,r,n='',l='',d=tsf.params.titleSeparator,g=tsf.params.objectTitle,c=tsf.states.useTagline,f=tsf.states.isRTL,u=tsf.states.isPrivate,y=tsf.states.isPasswordProtected;s=f?'after':'before';var b=function(){var B='before';tsf.states.isSettingsPage?f?'right'===jQuery('#tsf-home-title-location input:checked').val()&&(B='after'):'left'===jQuery('#tsf-home-title-location input:checked').val()&&(B='after'):tsf.states.isHome?f?'right'===tsf.params.titleLocation&&(B='after'):'left'===tsf.params.titleLocation&&(B='after'):f?'left'===tsf.params.titleLocation&&(B='after'):'right'===tsf.params.titleLocation&&(B='after'),a=B};b();var x=function(){var B='';if(!tsf.states.isSettingsPage)tsf.states.isHome?c&&(B=tsf.params.blogDescription):c&&(B=tsf.params.titleAdditions);else if(c){var N=document.getElementById('autodescription-site-settings[homepage_title_tagline]'),q=N?N.value:'';B=q.length?q:tsf.params.blogDescription}B.length&&(B=tsf.escapeSring(B),'before'===a?B=B+' '+d+' ':'after'===a?B=' '+d+' '+B:void 0),l=B.length?B:'',r=document.getElementById('tsf-title-placeholder'),l.length&&r&&(r.innerHTML=l)};x();var v=function(){var B='';u?B=tsf.i18n.privateTitle:y&&(B=tsf.i18n.protectedTitle),B.length&&(B=tsf.escapeSring(B),'before'===s?B+=' ':'after'===s?B=' '+B:void 0),n=B.length?B:'',n.length&&o&&(o.innerHTML=n),o=document.getElementById('tsf-title-placeholder-prefix'),n.length&&o&&(o.innerHTML=n)};v();var _=function(B){if(r||o){var N=jQuery(B.target),q=N.val(),M=!!l.length,F=!!n.length;if(!M&&r&&(r.style.display='none'),!F&&o&&(o.style.display='none'),!M&&!F)return void N.css('text-indent','initial');if(!q.length)return N.css('text-indent','initial'),r&&(r.style.display='none'),void(o&&(o.style.display='none'));var X=N.outerWidth(),V=(N.outerHeight(!0)-N.height())/2,J=(X-N.innerWidth())/2,K=f?'right':'left',G=(N.outerWidth(!0)-N.width())/2,Q={display:N.css('display'),lineHeight:N.css('lineHeight'),fontFamily:N.css('fontFamily'),fontWeight:N.css('fontWeight'),fontSize:N.css('fontSize'),letterSpacing:N.css('letterSpacing'),paddingTop:V+'px',paddingBottom:V+'px'},Y=jQuery(o),Z=jQuery(r),tt=0,et=0,it=0,st=0,at=0;if(F&&(Y.css(Q),at=Y.width(),st+=at,it+=G),M){var ot=0;switch(function(){var rt=jQuery('#tsf-title-offset');rt.text(q),rt.css({fontFamily:Q.fontFamily,fontWeight:Q.fontWeight,letterSpacing:Q.letterSpacing,fontSize:Q.fontSize}),ot=rt.width()}(),tt=N.width()-J-ot-at,tt=0>tt?0:tt,Z.css(Q),a){case'before':var nt=Z.width();0>nt&&(nt=0),st+=nt,it+=nt,et+=G;break;case'after':et+=G+ot+at;}}if(F&&Y.css(_defineProperty({},K,it+'px')),M){var rt;Z.css((rt={},_defineProperty(rt,K,et+'px'),_defineProperty(rt,'maxWidth',tt+'px'),rt))}N.css('text-indent',st+'px')}},T=function(){var N='',q=!!l.length,M=!!n.length,F=l,X=n;tsf.states.isTermEdit&&tsf.params.termName&&(X=f?' :'+tsf.params.termName:tsf.params.termName+': ',M=tsf.states.useTermPrefix),N=g,M&&('before'===s?N=X+N:'after'===s?N+=X:void 0),q&&('before'===a?N=F+N:'after'===a?N+=F:void 0),t.prop('placeholder',N)},k=function(B){var N=document.getElementById(B.target.id+'_chars');if(N){var q=0,M=B.target,F='',X=tsf.counterType,V='',J='';q=1>M.value.length?tsf.getStringLength(M.placeholder):(n?tsf.getStringLength(n):0)+tsf.getStringLength(M.value)+(l?tsf.getStringLength(l):0),25>q||75<=q?(F+='tsf-count-bad',V=tsf.i18n.bad):42>q||55<q?(F+='tsf-count-okay',V=tsf.i18n.okay):(F+='tsf-count-good',V=tsf.i18n.good),X&&1!=X?2==X?J=V:3==X&&(J=q.toString()+' - '+V):J=q.toString(),N.innerHTML=J,tsf.additionsClass&&(F+=' '+tsf.additionsClass),N.className!==F&&(N.className=F)}},C=function(B){var N=document.getElementById(B.target.id+'_pixels');if(N){var q='';1>B.target.value.length?q=B.target.placeholder:(q=B.target.value,n.length&&('before'===s?q=n+q:'after'===s?q+=n:void 0),l.length&&('before'===a?q=l+q:'after'===a?q+=l:void 0));var M={e:N,text:q,guideline:600};tsf.updatePixelCounter(M)}};t.on('input.tsfUpdateTitles',function I(B){_(B),T(),k(B),C(B)});t.on('tsf-update-title-counter',function S(B){k(B)});var L=function(){t.trigger('tsf-update-title-counter')},j=function(){t.trigger('input.tsfUpdateTitles')};j();var E=function(){x(),j()};jQuery('#autodescription-site-settings\\[homepage_title_tagline\\]').on('input',E),jQuery('#autodescription-site-settings\\[homepage_tagline\\]').on('change',E);var W=0,R=function(){clearTimeout(W),W=setTimeout(function(){j()},50)};jQuery(window).on('tsf-counter-updated',R);jQuery('#tsf-title-tagline-toggle :input').on('click',function D(B){var N=c;jQuery(B.target).is(':checked')?(jQuery('.tsf-custom-blogname-js').css('display','inline'),c=!0):(jQuery('.tsf-custom-blogname-js').css('display','none'),c=!1),N^c&&(x(),R())});jQuery('#visibility .save-post-visibility').on('click',function H(){var N=jQuery('#visibility').find('input:radio:checked').val();switch(u=!1,y=!1,N){case'password':var q=jQuery('#visibility').find('#post_password').val();y=!!q&&!!q.length;break;case'private':u=!0;break;default:case'public':}v(),R()});jQuery('#tsf-title-separator :input').on('click',function z(B){var N=jQuery(B.target).val(),q='';q='pipe'===N?'|':'dash'===N?'-':jQuery('<div/>').html('&'+N+';').text(),d=q,jQuery('.tsf-sep-js').text(' '+d+' '),x(),R()});var P=function(){var B=tsf.settingsChanged;j(),tsf.settingsChanged=B};jQuery('#autodescription-homepage-settings > button, #tsf-inpost-box > button').on('click',P),jQuery('#homepage-tab-general').on('tsf-tab-toggled',P);jQuery('#tsf-home-title-location :input').on('click',function U(){b(),x(),R()});var A=function(B){var N=B.target.value;N=N.trim(),g=N.length?N:tsf.params.untitledTitle,T(),L()};jQuery('#edittag #name').on('input',A),jQuery('#titlewrap #title').on('input',A);(function O(){var B=0,N=window.innerWidth;jQuery(window).resize(function(){clearTimeout(B),B=setTimeout(function(){var q=window.innerWidth;N<q?782>=N&&782<=q&&P():782<=N&&782>=q&&P(),N=q},50)})})()}}},_initUnboundTitleSettings:function _initUnboundTitleSettings(){if(tsf.hasInput){var t=jQuery('#autodescription_title, #autodescription-meta\\[doctitle\\], #autodescription-site-settings\\[homepage_title\\]');jQuery('#tsf-title-placeholder, #tsf-title-placeholder-prefix').on('click',function s(d){var g=jQuery(d.target).siblings(t)[0];if('function'==typeof g.setSelectionRange){g.focus();var c=2*g.value.length;g.setSelectionRange(c,c)}else{var f=g.value;g.value='',g.focus(),g.value=f}});jQuery('#autodescription-site-settings\\[title_rem_additions\\]').on('click',function a(d){jQuery(d.target).is(':checked')?jQuery('.tsf-title-additions-js').css('display','none'):jQuery('.tsf-title-additions-js').css('display','inline')});jQuery('#tsf-title-location input').on('click',function o(d){var g=jQuery('.tsf-title-additions-example-left'),c=jQuery('.tsf-title-additions-example-right');'right'===jQuery(d.target).val()?(g.css('display','none'),c.css('display','inline')):(g.css('display','inline'),c.css('display','none'))});jQuery('#autodescription-site-settings\\[homepage_title\\]').on('input',function n(d){var g=d.target.value||'',c=jQuery('.tsf-custom-title-js');0===g.length?c.text(tsf.params.objectTitle):c.text(g)});jQuery('#autodescription-site-settings\\[homepage_title_tagline\\]').on('input',function r(d){var g=d.target.value||'',c=jQuery('.tsf-custom-tagline-js');0===g.length?(c.text(tsf.params.blogDescription),0===tsf.params.blogDescription.length?jQuery('#tsf-home-title-location .tsf-sep-js').hide():jQuery('#tsf-home-title-location .tsf-sep-js').show()):(c.text(g),jQuery('#tsf-home-title-location .tsf-sep-js').show())}),jQuery('#autodescription-site-settings\\[homepage_title_tagline\\]').trigger('input');jQuery('#title-prefixes-toggle :input').on('click',function l(d){var g=jQuery(d.target),c=jQuery('.tsf-title-prefix-example');g.is(':checked')?c.css('display','none'):c.css('display','inline')})}},_initDescInputs:function _initDescInputs(){if(tsf.hasInput){var t=jQuery('#autodescription_description, #autodescription-meta\\[description\\], #autodescription-site-settings\\[homepage_description\\]');if(t.length){var s=tsf.params.descriptionSeparator;jQuery('#tsf-description-separator input').on('click',function a(c){var f=jQuery(c.target).val(),u='';u='pipe'===f?'|':'dash'===f?'-':jQuery('<div/>').html('&'+f+';').text(),s=u,jQuery('#autodescription-descsep-js').text(' '+s+' '),g()});var o=function(c){var f=document.getElementById(c.target.id+'_chars');if(f){var u=0,y=c.target,b='',x=tsf.counterType,v='',_='';u=1>y.value.length?tsf.getStringLength(y.placeholder):tsf.getStringLength(y.value),100>u||175<=u?(b+='tsf-count-bad',v=tsf.i18n.bad):137>u||155<u?(b+='tsf-count-okay',v=tsf.i18n.okay):(b+='tsf-count-good',v=tsf.i18n.good),x&&1!=x?2==x?_=v:3==x&&(_=u.toString()+' - '+v):_=u.toString(),f.innerHTML=_,tsf.additionsClass&&(b+=' '+tsf.additionsClass),f.className!==b&&(f.className=b)}},n=function(c){var f=document.getElementById(c.target.id+'_pixels');if(f){var u='';u=1>c.target.value.length?c.target.placeholder:c.target.value;var y={e:f,text:u,guideline:920};tsf.updatePixelCounter(y)}};t.on('input.tsfUpdateDescriptions',function r(c){o(c),n(c)});var l=function(){t.trigger('input.tsfUpdateDescriptions')};l();var d=0,g=function(){clearTimeout(d),d=setTimeout(function(){l()},50)};jQuery(window).on('tsf-counter-updated',g)}}},_initCounters:function _initCounters(){if(tsf.hasInput){jQuery('.tsf-counter').on('click',function t(){++tsf.counterType,3<tsf.counterType&&(tsf.counterType=0),s();var r='.tsf-counter-wrap .tsf-ajax',l=0;tsf.resetAjaxLoader(r),tsf.setAjaxLoader(r);var d={method:'POST',url:ajaxurl,datatype:'json',data:{action:'the_seo_framework_update_counter',nonce:tsf.nonces.edit_posts,val:tsf.counterType},async:!0,success:function success(g){switch(g=jQuery.parseJSON(g),'success'===g.type&&(l=1),l){case 0:tsf.unsetAjaxLoader(r,!1);break;case 1:tsf.unsetAjaxLoader(r,!0);break;default:tsf.resetAjaxLoader(r);}}};jQuery.ajax(d)});var s=function(){var n=tsf.counterType;1==n?(tsf.additionsClass='tsf-counter-one',tsf.counterType=1):2==n?(tsf.additionsClass='tsf-counter-two',tsf.counterType=2):3==n?(tsf.additionsClass='tsf-counter-three',tsf.counterType=3):(tsf.additionsClass='tsf-counter-zero',tsf.counterType=0),tsf._triggerCounterUpdate()};s();jQuery('#autodescription-site-settings\\[display_character_counter\\]').on('click',function a(n){jQuery(n.target).is(':checked')?jQuery('.tsf-counter-wrap').show():jQuery('.tsf-counter-wrap').hide()});jQuery('#autodescription-site-settings\\[display_pixel_counter\\]').on('click',function o(n){jQuery(n.target).is(':checked')?(jQuery('.tsf-pixel-counter-wrap').show(),tsf._triggerCounterUpdate()):jQuery('.tsf-pixel-counter-wrap').hide()})}},_initToolTips:function _initToolTips(){var t=0,s=!1,a=function(){s=!0,clearTimeout(t),t=setTimeout(function(){s=!1},250)},o=function(y,b){b=b||!1;var x='pointerdown.tsfTT touchstart.tsfTT click.tsfTT',v=jQuery(y);b?(v.off('mousemove mouseleave mouseout tsf-tooltip-update'),jQuery(document.body).off(x)):(v.on({mousemove:d,mouseleave:g,mouseout:g}),jQuery(document.body).off(x).on(x,c)),v.on('tsf-tooltip-update',r)},n=function(y){o(y,!0)},r=function(y){if(y.target.classList.contains('tsf-tooltip-item')){var b=y.target.querySelector('.tsf-tooltip-text');b instanceof Element&&(b.innerHTML=y.target.dataset.desc)}},l=function(y){var b=jQuery(y.target),x=y.target.dataset.desc;if(x&&0===b.find('div').length){y.target.title='';var v=jQuery('<div class="tsf-tooltip"><span class="tsf-tooltip-text">'+x+'</span><div class="tsf-tooltip-arrow"></div></div>');b.append(v);var _=b.outerHeight()+9;v.css('bottom',_+'px');var T=b.closest('.tsf-tooltip-wrap');if(42>T.width()){v.css(tsf.states.isRTL?'right':'left',-15+'px')}}},d=function(y){var b=jQuery(y.target),x=y.originalEvent&&y.originalEvent.pageX||y.pageX,v=x-b.closest('.tsf-tooltip-wrap').offset().left-12,_=b.find('.tsf-tooltip'),T=_.find('.tsf-tooltip-arrow'),k=tsf.states.isRTL?_.css('right'):_.css('left');if(k=parseInt(k,10),k=isNaN(k)?0:-Math.floor(k/2)-2,8>=v)T.css('left',8+k+'px');else if(void 0!==_.offset()){var C=_.find('.tsf-tooltip-text'),I=C.width()+k,S=_.offset().left+I+12;x>S?T.css('left',I+'px'):T.css('left',v+'px')}},g=function(y){s||(jQuery(y.target).find('.tsf-tooltip').remove(),n(y.target))},c=function(y){a();var _,x='.tsf-tooltip',v=jQuery(y.target);if(v.hasClass('tsf-tooltip-item')&&(_=v.find(x)),!_){var T=v.children('.tsf-tooltip-item');T.length&&(_=T.find(x))}_&&_.length?jQuery(x).not(_).remove():jQuery(x).remove()},f=function(y){if(!s){var b=!1;switch(y.type){case'mouseenter':break;case'pointerdown':case'touchstart':b=!0;break;default:}if(y.target.classList.contains('tsf-tooltip-item'))b&&c(y),l(y),d(y),o(y.target);else{var x=y.target.querySelector('.tsf-tooltip-item:hover'),v=new jQuery.Event(y.type);v.pageX=y.originalEvent&&y.originalEvent.pageX||y.pageX,x?(tsfL10n.states.debug&&console.log('Tooltip event warning: delegation'),jQuery(x).trigger(v)):(tsfL10n.states.debug&&console.log('Tooltip event warning: bubbling'),jQuery(y.target).closest('.tsf-tooltip-wrap').find('.tsf-tooltip-item:hover').trigger(v))}return!1}},u=function(){var y=jQuery('.tsf-tooltip-wrap');y.off('mouseenter pointerdown touchstart'),y.on('mouseenter pointerdown touchstart','.tsf-tooltip-item',f)};u(),jQuery(window).on('tsf-reset-tooltips',u)},tabToggle:function tabToggle(t){var s=jQuery(t.target);if(s.is(':checked')){var a=s.prop('id'),o=s.prop('name');if('undefined'!=typeof o){var n='tsf-active-tab-content',r=jQuery('#'+a+'-content'),l=jQuery('.'+n);if(!r.is(l)&&'undefined'!=typeof r){var d=jQuery('.'+o+'-content');d.fadeOut(150,function(){jQuery(this).removeClass(n)}),setTimeout(function(){r.addClass(n).fadeIn(250)},150),setTimeout(function(){jQuery('#'+a).trigger('tsf-tab-toggled')},175)}}}},flexTabToggle:function flexTabToggle(t){var s=jQuery(t.target);if(s.is(':checked')){var a=s.prop('id'),o=s.prop('name');if('undefined'!=typeof o){var n='tsf-flex-tab-content-active',r=jQuery('#'+a+'-content'),l=jQuery('.'+n);if(!r.is(l)&&'undefined'!=typeof r){var d=jQuery('.'+o+'-content');d.fadeOut(150,function(){jQuery(this).removeClass(n)}),setTimeout(function(){r.addClass(n).fadeIn(250)},150),setTimeout(function(){jQuery('#'+a).trigger('tsf-flex-tab-toggled')},175)}}}},setTabsOnload:function setTabsOnload(){if(tsf.hasInput)if(tsf.states.isSettingsPage){var t=jQuery('.tsf-nav-tab-wrapper .tsf-tab:nth-of-type(n+2) input:checked');t.length&&t.each(function(){var a=jQuery(this),o=a.prop('id'),n=a.prop('name');if('undefined'!=typeof n){var r='tsf-active-tab-content',l=jQuery('#'+o+'-content');if('undefined'!=typeof l){var d=jQuery('.'+n+'-content');d.removeClass(r),l.addClass(r),setTimeout(function(){jQuery('#'+o).trigger('tsf-tab-toggled')},20)}}})}else;},taglineToggleDesc:function taglineToggleDesc(t){var s=jQuery(t.target),a=jQuery('#tsf-on-blogname-js');s.is(':checked')?a.css('display','inline'):a.css('display','none')},additionsToggleDesc:function additionsToggleDesc(t){var s=jQuery(t.target),a=jQuery('#tsf-description-additions-js');s.is(':checked')?a.css('display','inline'):a.css('display','none')},taglineToggleOnload:function taglineToggleOnload(){if(tsf.hasInput){var t=jQuery('#tsf-title-tagline-toggle :input'),s=jQuery('.tsf-custom-blogname-js'),a=jQuery('#tsf-description-additions-toggle :input'),o=jQuery('#tsf-description-additions-js'),n=jQuery('#tsf-description-onblogname-toggle :input'),r=jQuery('#tsf-on-blogname-js'),l=jQuery('#tsf-title-additions-toggle :input'),d=jQuery('.tsf-title-additions-js');t.is(':checked')?s.css('display','inline'):s.css('display','none'),a.is(':checked')?o.css('display','inline'):o.css('display','none'),n.is(':checked')?r.css('display','inline'):r.css('display','none'),l.is(':checked')?d.css('display','none'):d.css('display','inline')}},attachUnsavedChangesListener:function attachUnsavedChangesListener(){if(tsf.hasInput){var t=function(o){tsf.settingsChanged||tsf.registerChange(),jQuery(s).not(a).off(o.type,t)},s='.tsf-metaboxes :input, #tsf-inpost-box .inside :input',a='.tsf-tab :input, .tsf-flex-nav-tab :input';jQuery(s).not(a).on('change',t),s='.tsf-metaboxes input[type=text], .tsf-metaboxes textarea, #tsf-inpost-box .inside input[type=text], #tsf-inpost-box .inside textarea',a='.tsf-nav-tab-wrapper input, .tsf-flex-nav-tab-wrapper input',jQuery(s).not(a).on('input',t),window.onbeforeunload=function(){if(tsf.settingsChanged)return tsf.i18n.saveAlert},jQuery('.tsf-metaboxes input[type="submit"], #publishing-action input[type="submit"], #save-action input[type="submit"], a.submitdelete').click(function(){window.onbeforeunload=null})}},registerChange:function registerChange(){tsf.settingsChanged=!0},confirmedReset:function confirmedReset(){return confirm(tsf.i18n.confirmReset)},onLoadUnregisterChange:function onLoadUnregisterChange(){tsf.settingsChanged=!1},dismissNotice:function dismissNotice(t){jQuery(t.target).parents('.tsf-notice').slideUp(200,function(){this.remove()})},setAjaxLoader:function setAjaxLoader(t){jQuery(t).toggleClass('tsf-loading')},unsetAjaxLoader:function unsetAjaxLoader(t,s){var a='tsf-success',o=2500;s||(a='tsf-error',o=5e3),jQuery(t).removeClass('tsf-loading').addClass(a).fadeOut(o)},resetAjaxLoader:function resetAjaxLoader(t){jQuery(t).stop().empty().prop('class','tsf-ajax').css('opacity','1').removeProp('style')},openImageEditor:function openImageEditor(t){if(jQuery(t.target).prop('disabled')||'undefined'==typeof wp.media)return t.preventDefault(),void t.stopPropagation();var o,s=jQuery(t.target),a=s.data('inputid');if(o)return void o.open();t.preventDefault(),t.stopPropagation(),tsf.extendCropper(),o=wp.media({button:{text:tsf.other[a].frame_button,close:!1},states:[new wp.media.controller.Library({title:tsf.other[a].frame_title,library:wp.media.query({type:'image'}),multiple:!1,date:!1,priority:20,suggestedWidth:1200,suggestedHeight:630}),new tsf.cropper({imgSelectOptions:tsf.calculateImageSelectOptions})]});var n=function(){o.setState('cropper')};o.off('select',n),o.on('select',n);var r=function(g){var c=g.url,f=g.id,u=g.width,y=g.height;jQuery('#'+a+'-url').val(c),jQuery('#'+a+'-id').val(f)};o.off('cropped',r),o.on('cropped',r);var l=function(g){var c=g.get('url'),f=g.get('id'),u=g.get('width'),y=g.get('height');jQuery('#'+a+'-url').val(c),jQuery('#'+a+'-id').val(f)};o.off('skippedcrop',l),o.on('skippedcrop',l);var d=function(){jQuery('#'+a+'-select').text(tsf.other[a].change),jQuery('#'+a+'-url').prop('readonly',!0).css('opacity',0).animate({opacity:1},{queue:!0,duration:1000},'swing'),tsf.appendRemoveButton(s,a,!0),tsf.registerChange()};o.off('skippedcrop cropped',d),o.on('skippedcrop cropped',d),o.open()},appendRemoveButton:function appendRemoveButton(t,s,a){t&&s&&!jQuery('#'+s+'-remove').length&&(t.after('<a href="javascript:void(0)" id="'+s+'-remove" class="tsf-remove-social-image button button-small" data-inputid="'+s+'" title="'+tsf.other[s].remove_title+'">'+tsf.other[s].remove+'</a>'),a&&jQuery('#'+s+'-remove').css('opacity',0).animate({opacity:1},{queue:!0,duration:1000},'swing')),tsf.resetImageEditorActions()},removeEditorImage:function removeEditorImage(t){var s=jQuery(t.target),a=s.data('inputid');jQuery('#'+a+'-select').prop('disabled')||(jQuery('#'+a+'-select').addClass('disabled').prop('disabled',!0),jQuery('#'+a+'-remove').addClass('disabled').prop('disabled',!0).fadeOut(500,function(){jQuery(this).remove(),jQuery('#'+a+'-select').text(tsf.other[a].select).removeClass('disabled').removeProp('disabled')}),jQuery('#'+a+'-url').val('').removeProp('readonly').css('opacity',0).animate({opacity:1},{queue:!0,duration:500},'swing'),jQuery('#'+a+'-id').val(''),tsf.registerChange())},extendCropper:function extendCropper(){if('undefined'==typeof tsf.cropper.control){var t,s=wp.media.controller;return t=s.Cropper.extend({doCrop:function doCrop(a){var o=a.get('cropDetails'),n=tsf.cropper.control;if(n.params.flex_width&&n.params.flex_height)if(o.width===o.height)o.width>n.params.flex_width&&(o.dst_width=o.dst_height=n.params.flex_width);else if(o.width>n.params.flex_width||o.height>n.params.flex_height)if(o.width>o.height){var r=o.width/n.params.flex_width;o.dst_width=n.params.flex_width,o.dst_height=Math.round(o.height/r)}else{var l=o.height/n.params.flex_height;o.dst_height=n.params.flex_height,o.dst_width=Math.round(o.width/l)}return'undefined'==typeof o.dst_width&&(o.dst_width=0,o.dst_height=0),wp.ajax.post('tsf-crop-image',{nonce:tsf.nonces.upload_files,id:a.get('id'),context:'tsf-image',cropDetails:o})}}),t.prototype.control={},t.control={params:{flex_width:4096,flex_height:4096,width:1200,height:630}},void(tsf.cropper=t)}},calculateImageSelectOptions:function calculateImageSelectOptions(t,s){var y,b,x,a=tsf.cropper.control,o=!!parseInt(a.params.flex_width,10),n=!!parseInt(a.params.flex_height,10),r=parseInt(a.params.width,10),l=parseInt(a.params.height,10),d=t.get('width'),g=t.get('height'),c=r/l,f=r,u=l;return s.set('control',a.params),s.set('canSkipCrop',!tsf.mustBeCropped(a.params.flex_width,a.params.flex_height,d,g)),d/g>c?(l=g,r=l*c):(r=d,l=r/c),y=(d-r)/2,b=(g-l)/2,x={handles:!0,keys:!0,instance:!0,persistent:!0,imageWidth:d,imageHeight:g,minWidth:f>r?r:f,minHeight:u>l?l:u,x1:y,y1:b,x2:r+y,y2:l+b},!1==n&&!1==o&&(x.aspectRatio=r+':'+l),!0==n&&(x.minHeight=200,x.maxWidth=d),!0==o&&(x.minWidth=200,x.maxHeight=g),x},mustBeCropped:function mustBeCropped(t,s,a,o){return a<=t&&o<=s?!1:!0},resetImageEditorActions:function resetImageEditorActions(){jQuery('.tsf-remove-social-image').off('click',tsf.removeEditorImage),jQuery('.tsf-remove-social-image').on('click',tsf.removeEditorImage)},setupImageEditorActions:function setupImageEditorActions(){jQuery('.tsf-set-social-image').off('click',tsf.openImageEditor),jQuery('.tsf-remove-social-image').off('click',tsf.removeEditorImage),jQuery('.tsf-set-social-image').on('click',tsf.openImageEditor),jQuery('.tsf-remove-social-image').on('click',tsf.removeEditorImage)},checkImageEditorInput:function checkImageEditorInput(){var t=jQuery('.tsf-set-social-image');if(t.length){var s='',a='';jQuery.each(t,function(o,n){s=jQuery(n).data('inputid'),a=jQuery('#'+s+'-id'),a.length&&0<a.val()&&(jQuery('#'+s+'-url').prop('readonly',!0),tsf.appendRemoveButton(jQuery(n),s,!1)),jQuery('#'+s+'-url').val()&&jQuery('#'+s+'-select').text(tsf.other[s].change)})}},setColorOnload:function setColorOnload(){var t=jQuery('.tsf-color-picker');t.length&&jQuery.each(t,function(s,a){var o=jQuery(a),n='',r=o.data('tsf-default-color');o.wpColorPicker({defaultColor:r,width:238,change:function change(){n=o.wpColorPicker('color'),''==n&&(n=r),o.val(n),tsf.registerChange()},clear:function clear(){o.parent().siblings('.wp-color-result').css('backgroundColor',r),tsf.registerChange()},palettes:!1})})},_doFlexResizeListener:function _doFlexResizeListener(){if(jQuery('.tsf-flex').length){tsf._setResizeListeners();var t=0,s={},a=0,o=jQuery('.tsf-flex-nav-tab-wrapper');jQuery(window).on('tsf-flex-resize',function(){clearTimeout(t);var n=0;t=setTimeout(function(){if(o.length){var r=jQuery('.tsf-flex-nav-tab-inner'),l=o.width(),d=r.width(),g=jQuery('.tsf-flex-nav-name');s.tabWrapper||(s.tabWrapper={},s.tabWrapper.outer=0,s.tabWrapper.inner=0,s.tabWrapper.shown=1),!s.tabWrapper.shown&&s.tabWrapper.outer<l&&(g.fadeIn(250),setTimeout(function(){d=r.width()},n)),setTimeout(function(){d>l?(g.hide(),s.tabWrapper.shown=0):s.tabWrapper.outer<l&&(g.fadeIn(250),s.tabWrapper.shown=1)},2*n),setTimeout(function(){s.tabWrapper.outer=l,s.tabWrapper.inner=d},3*n)}},a),n=10,a=75}),jQuery(window).trigger('tsf-flex-resize')}},_setResizeListeners:function _setResizeListeners(){jQuery(window).on('resize orientationchange',tsf._triggerResize),jQuery('#collapse-menu').click(tsf._triggerResize),jQuery('.columns-prefs :input[type=radio]').change(tsf._triggerResize),jQuery('.meta-box-sortables').on('sortupdate',tsf._triggerResize)},_triggerTooltipReset:function _triggerTooltipReset(){jQuery(window).trigger('tsf-reset-tooltips')},_triggerTooltipUpdate:function _triggerTooltipUpdate(t){jQuery(t).trigger('tsf-tooltip-update')},_triggerResize:function _triggerResize(){jQuery(window).trigger('tsf-flex-resize')},_triggerCounterUpdate:function _triggerCounterUpdate(){jQuery(window).trigger('tsf-counter-updated')},_triggerReady:function _triggerReady(){jQuery(document.body).trigger('tsf-ready')},_doReady:function _doReady(){tsf._initCounters(),tsf._initTitleInputs(),tsf._initUnboundTitleSettings(),tsf._initDescInputs(),tsf.setTabsOnload(),tsf.taglineToggleOnload(),tsf._initToolTips(),tsf.setupImageEditorActions(),tsf.checkImageEditorInput(),tsf.setColorOnload(),tsf.attachUnsavedChangesListener(),tsf.onLoadUnregisterChange(),tsf._triggerReady(),tsf._doFlexResizeListener()},setupVars:function setupVars(){tsf.counterType=parseInt(tsf.states.counterType),tsf.hasInput=tsf.states.hasInput},ready:function ready(t){tsf.setupVars(),t('div.updated, div.error, div.notice-warning').insertAfter('div.tsf-top-wrap'),t(document.body).ready(tsf._doReady),t('.tsf-js-confirm-reset').on('click',tsf.confirmedReset),t('.tsf-tabs-radio').on('change',tsf.tabToggle),t('.tsf-flex-nav-tab-radio').on('change',tsf.flexTabToggle),t('#tsf-description-onblogname-toggle :input').on('click',tsf.taglineToggleDesc),t('#tsf-description-additions-toggle :input').on('click',tsf.additionsToggleDesc),t('.tsf-dismiss').on('click',tsf.dismissNotice)}},jQuery(tsf.ready);
